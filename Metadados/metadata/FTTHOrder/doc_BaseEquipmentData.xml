<?xml version="1.0" encoding="UTF-8" ?>
<document name="FTTHOrder.BaseEquipmentData">
  <dbSchema>ORDER</dbSchema>
  <description><![CDATA[
    <p style="margin-top: 0">
      Document respons&#225;vel por manter os dados dos equipamentos que foram
      instalados/retirados/modificados no cliente
    </p>
  ]]></description>
  <extends>doc_com.conceptwave.system.Document</extends>
  <generatedKey>true</generatedKey>
  <guid>{5600bbbc-b3e9-480c-89ec-f45b107479be}</guid>
  <label>Base Equipment Data</label>
  <metaVersion>3</metaVersion>
  <variableList>
    <variable name="numeroSerieONT" type="leaf">
      <column>NUM_SERIE_ONT</column>
      <label>Numero de Serie ONT</label>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_FTTHCommon.numeroSerieONT</valueType>
    </variable>
    <variable name="foiDevolvidoONT" type="leaf">
      <column>IND_ONT_DEVOLVIDO</column>
      <label>Devolvido?</label>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_FTTHCommon.foiDevolvido</valueType>
    </variable>
    <variable name="motivoONT" type="leaf">
      <column>DESC_MOTIVO_ONT</column>
      <label>Motivo</label>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_FTTHCommon.motivo</valueType>
    </variable>
    <variable name="numeroSerieHomeGateway" type="leaf">
      <column>NUM_SERIE_HOME_GATEWAY</column>
      <label>Numero de Serie Home Gateway</label>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_FTTHCommon.numeroSerieHomeGateway</valueType>
    </variable>
    <variable name="foiDevolvidoHomeGateway" type="leaf">
      <column>IND_HOME_GATEWAY_DEVOLVIDO</column>
      <label>Devolvido?</label>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_FTTHCommon.foiDevolvido</valueType>
    </variable>
    <variable name="motivoHomeGateway" type="leaf">
      <column>DESC_MOTIVO_HOME_GATEWAY</column>
      <label>Motivo</label>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_FTTHCommon.motivo</valueType>
    </variable>
    <variable name="flagAssociateONT" type="leaf">
      <column>ONT_ASSOCIADO</column>
      <label>flagAssociateONT</label>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_FTTHCommon.flagAssociateONT</valueType>
    </variable>
    <variable name="atividade" type="leaf">
      <column>ATIVIDADE</column>
      <label>Nome da Atividade</label>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_FTTHCommon.nomeAtividade</valueType>
    </variable>
    <variable name="flagDadoOriginal" type="leaf">
      <column>IND_DADO_ORIGINAL</column>
      <label>flagDadoOriginal</label>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_FTTHCommon.flagDadoOriginal</valueType>
    </variable>
    <variable name="cwDocId" type="leaf">
      <column>CWDOCID</column>
      <key>1</key>
      <label>System document ID</label>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_cwf.cwDocId</valueType>
    </variable>
    <variable name="cwOrderId" type="leaf">
      <column>CWORDERID</column>
      <label>System order ID</label>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_cwf.cwOrderId</valueType>
    </variable>
    <variable name="cwParentId" type="leaf">
      <column>CWPARENTID</column>
      <label>System parent ID</label>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_cwf.cwParentId</valueType>
    </variable>
    <variable name="lastUpdatedDate" type="leaf">
      <column>LASTUPDATEDDATE</column>
      <label>System last updated timestamp</label>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_cwf.lastUpdatedDate</valueType>
    </variable>
    <variable name="updatedBy" type="leaf">
      <column>UPDATEDBY</column>
      <label>System updated by</label>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_cwf.updatedBy</valueType>
    </variable>
    <variable name="adicionarSTB" type="leaf">
      <dontMap>true</dontMap>
      <propertyElement type="elfld"/>
      <valueType>dtype_FTTHCommon.nomeAtividade</valueType>
    </variable>
    <variable name="statusAcao" type="leaf">
      <column>STATUSACAO</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_FTTHCommon.statusAcao</valueType>
    </variable>
    <variable name="codOperacao" type="leaf">
      <column>CODOPERACAO</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_cwf.String64</valueType>
    </variable>
    <variable name="nomeCPE" type="leaf">
      <column>NOMECPE</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_FTTHOrder.nomeCPE</valueType>
    </variable>
    <variable name="codEquipamento" type="leaf">
      <column>CODEQUIPAMENTO</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_FTTHInventorySAPInterface.char18</valueType>
    </variable>
    <variable name="isSAP" type="leaf">
      <column>ISSAP</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_cwt_common.booleanCheckBox</valueType>
    </variable>
    <variable name="isNETWIN" type="leaf">
      <column>ISNETWIN</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_cwt_common.booleanCheckBox</valueType>
    </variable>
    <variable name="codOperacaoHGW" type="leaf">
      <column>CODOPERACAOHGW</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_cwf.String64</valueType>
    </variable>
    <variable name="nomeCPEHGW" type="leaf">
      <column>NOMECPEHGW</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_FTTHOrder.nomeCPE</valueType>
    </variable>
    <variable name="codEquipamentoHGW" type="leaf">
      <column>CODEQUIPAMENTOHGW</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_FTTHInventorySAPInterface.char18</valueType>
    </variable>
    <variable name="isSAPHGW" type="leaf">
      <column>ISSAPHGW</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_cwt_common.booleanCheckBox</valueType>
    </variable>
    <variable name="isNETWINHGW" type="leaf">
      <column>ISNETWINHGW</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_cwt_common.booleanCheckBox</valueType>
    </variable>
    <variable name="tabname" type="leaf">
      <column>TABNAME</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_FTTHCommon.string16</valueType>
    </variable>
    <variable name="idAtivo" type="leaf">
      <column>IDATIVO</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_FTTHCommon.string100</valueType>
    </variable>
    <variable name="idAtivoHGW" type="leaf">
      <column>IDATIVOHGW</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_FTTHCommon.string100</valueType>
    </variable>
    <variable name="flgValidado" type="leaf">
      <column>FLGVALIDADO</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_com.conceptwave.system.Boolean</valueType>
    </variable>
    <variable name="isProcessando" type="leaf">
      <column>ISPROCESSANDO</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_com.conceptwave.system.Boolean</valueType>
    </variable>
    <variable name="numeroSerieONT_Original" type="leaf">
      <column>NUMEROSERIEONT_ORIGINAL</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_FTTHClickInterface.numeroSerieEquipamento</valueType>
    </variable>
    <variable name="nomeCPE_ONT_Original" type="leaf">
      <column>NOMECPE_ONT_ORIGINAL</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_FTTHOrder.nomeCPE</valueType>
    </variable>
    <variable name="numeroSerieHGW_Original" type="leaf">
      <column>NUMEROSERIEHGW_ORIGINAL</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_FTTHCommon.numeroSerieHomeGateway</valueType>
    </variable>
    <variable name="nomeCPE_HGW_Original" type="leaf">
      <column>NOMECPE_HGW_ORIGINAL</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_FTTHOrder.nomeCPE</valueType>
    </variable>
    <variable name="foiDevolvidoONT_Original" type="leaf">
      <column>FOIDEVOLVIDOONT_ORIGINAL</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_FTTHCommon.foiDevolvido</valueType>
    </variable>
    <variable name="foiDevolvidoHGW_Original" type="leaf">
      <column>FOIDEVOLVIDOHGW_ORIGINAL</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_FTTHCommon.foiDevolvido</valueType>
    </variable>
    <variable name="codOperacaoHGW_Original" type="leaf">
      <column>CODOPERACAOHGW_ORIGINAL</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_cwf.String64</valueType>
    </variable>
    <variable name="codEquipamentoHGW_Original" type="leaf">
      <column>CODEQUIPAMENTOHGW_ORIGINAL</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_FTTHInventorySAPInterface.char18</valueType>
    </variable>
    <variable name="codOperacaoONT_Original" type="leaf">
      <column>CODOPERACAOONT_ORIGINAL</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_cwf.String64</valueType>
    </variable>
    <variable name="codEquipamentoONT_Original" type="leaf">
      <column>CODEQUIPAMENTOONT_ORIGINAL</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_FTTHInventorySAPInterface.char18</valueType>
    </variable>
    <variable name="cpeHasChanged" type="leaf">
      <column>CPEHASCHANGED</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_com.conceptwave.system.Boolean</valueType>
    </variable>
    <variable name="cpeHasChangedHGW" type="leaf">
      <column>CPEHASCHANGEDHGW</column>
      <table>TBI_EQUIPAMENTO_BASE</table>
      <valueType>dtype_com.conceptwave.system.Boolean</valueType>
    </variable>
  </variableList>
  <methodList>
    <method name="cwLeafInitAction$tabname" type="laction">
      <path>doc_FTTHOrder.BaseEquipmentData/leaf_tabname</path>
      <type>initializer</type>
      <valueType>doc_FTTHOrder.BaseEquipmentData/leaf_tabname</valueType>
      <script><![CDATA['ONT']]></script>
    </method>
    <method name="cwLeafInitAction$cpeHasChanged" type="laction">
      <path>doc_FTTHOrder.BaseEquipmentData/leaf_cpeHasChanged</path>
      <type>initializer</type>
      <valueType>doc_FTTHOrder.BaseEquipmentData/leaf_cpeHasChanged</valueType>
      <script>false;</script>
    </method>
    <method name="cwLeafInitAction$foiDevolvidoONT_Original" type="laction">
      <path>doc_FTTHOrder.BaseEquipmentData/leaf_foiDevolvidoONT_Original</path>
      <type>initializer</type>
      <script>false;</script>
    </method>
    <method name="cwLeafInitAction$foiDevolvidoHGW_Original" type="laction">
      <path>doc_FTTHOrder.BaseEquipmentData/leaf_foiDevolvidoHGW_Original</path>
      <type>initializer</type>
      <valueType>doc_FTTHOrder.BaseEquipmentData/leaf_foiDevolvidoHGW_Original</valueType>
      <script>false;</script>
    </method>
    <method name="cwLeafInitAction$codOperacaoHGW" type="laction">
      <path>doc_FTTHOrder.BaseEquipmentData/leaf_codOperacaoHGW</path>
      <type>initializer</type>
      <valueType>doc_FTTHOrder.BaseEquipmentData/leaf_codOperacaoHGW</valueType>
      <script><![CDATA['Consulta']]></script>
    </method>
    <method name="cwLeafInitAction$cpeHasChangedHGW" type="laction">
      <path>doc_FTTHOrder.BaseEquipmentData/leaf_cpeHasChangedHGW</path>
      <type>initializer</type>
      <valueType>doc_FTTHOrder.BaseEquipmentData/leaf_cpeHasChangedHGW</valueType>
      <script>false;</script>
    </method>
    <method name="cwLeafInitAction$isNETWIN" type="laction">
      <path>doc_FTTHOrder.BaseEquipmentData/leaf_isNETWIN</path>
      <type>initializer</type>
      <valueType>doc_FTTHOrder.BaseEquipmentData/leaf_isNETWIN</valueType>
      <script>false</script>
    </method>
    <method name="cwLeafInitAction$flgValidado" type="laction">
      <path>doc_FTTHOrder.BaseEquipmentData/leaf_flgValidado</path>
      <type>initializer</type>
      <script>false</script>
    </method>
    <method name="cwLeafInitAction$codOperacao" type="laction">
      <path>doc_FTTHOrder.BaseEquipmentData/leaf_codOperacao</path>
      <type>initializer</type>
      <valueType>doc_FTTHOrder.BaseEquipmentData/leaf_codOperacao</valueType>
      <script><![CDATA['Consulta']]></script>
    </method>
    <method name="cwLeafInitAction$isProcessando" type="laction">
      <path>doc_FTTHOrder.BaseEquipmentData/leaf_isProcessando</path>
      <type>initializer</type>
      <valueType>doc_FTTHOrder.BaseEquipmentData/leaf_isProcessando</valueType>
      <script>false</script>
    </method>
    <method name="cwLeafInitAction$statusAcao" type="laction">
      <path>doc_FTTHOrder.BaseEquipmentData/leaf_statusAcao</path>
      <type>initializer</type>
      <valueType>doc_FTTHOrder.BaseEquipmentData/leaf_statusAcao</valueType>
      <script><![CDATA['pendente']]></script>
    </method>
    <method name="cwLeafInitAction$isSAP" type="laction">
      <path>doc_FTTHOrder.BaseEquipmentData/leaf_isSAP</path>
      <type>initializer</type>
      <valueType>doc_FTTHOrder.BaseEquipmentData/leaf_isSAP</valueType>
      <script>false</script>
    </method>
    <method name="cwLeafInitAction$flagAssociateONT" type="laction">
      <path>doc_FTTHOrder.BaseEquipmentData/leaf_flagAssociateONT</path>
      <type>initializer</type>
      <valueType>doc_FTTHOrder.BaseEquipmentData/leaf_flagAssociateONT</valueType>
      <script>document.flagAssociateONT = 0;</script>
    </method>
  </methodList>
  <UserInterface name="UserInterface" type="ui">
    <extends>doc_com.conceptwave.system.Document/ui_UserInterface</extends>
    <variableList>
      <variable name="model" type="uivar">
        <label>model</label>
        <valueType>doc_FTTHOrder.BaseEquipmentData</valueType>
      </variable>
      <variable name="ONTActivationStatusFinderUI" type="leaf">
        <valueType>findDoc_FTTHOrder.ONTActivationStatusFinder/ui_UserInterface</valueType>
      </variable>
      <variable name="CPEValidationStatusFinderUI" type="leaf">
        <valueType>findDoc_FTTHOrder.CPEValidationStatusFinder/ui_UserInterface</valueType>
      </variable>
      <variable name="changeCPEGridFinderUI" type="leaf">
        <valueType>findDoc_FTTHOrder.changeCPEGridFinder/ui_UserInterface</valueType>
      </variable>
    </variableList>
    <vformList>
      <vform name="Forms" type="frmui">
        <extends>doc_com.conceptwave.system.Document/ui_UserInterface/frmui_Forms</extends>
        <overlayList>
          <overlay name="Default" type="exov">
            <base>ui_com.conceptwave.system.DocumentUserInterface/frmui_Forms/exov_Default</base>
            <extends>ui_com.conceptwave.system.DocumentUserInterface/frmui_Forms/exov_Default</extends>
            <label>Default</label>
            <overrideList>
              <override name="VerticalLayout" type="elvlt">
                <height>100%</height>
                <width>100%</width>
                <elementList>
                  <element name="equipmentData" type="elhdr">
                    <label>Dados do Equipamento</label>
                  </element>
                  <element name="equipments" type="eltset">
                    <dataSource type="varPath">
                      <variablePathList>
                        <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uivar_model</variablePath>
                        <variablePath>doc_FTTHOrder.BaseEquipmentData/leaf_tabname</variablePath>
                      </variablePathList>
                    </dataSource>
                    <tabChangedMethod type="varPath">
                      <variablePathList>
                        <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uimthd_refreshTab</variablePath>
                      </variablePathList>
                    </tabChangedMethod>
                    <elementList>
                      <element name="ONT" type="eltab">
                        <formReference type="varPath">
                          <variablePathList>
                            <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/frmui_Forms</variablePath>
                            <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/frmui_Forms/vform_ONT</variablePath>
                          </variablePathList>
                        </formReference>
                        <label>ONT</label>
                      </element>
                      <element name="HGW" type="eltab">
                        <formReference type="varPath">
                          <variablePathList>
                            <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/frmui_Forms</variablePath>
                            <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/frmui_Forms/vform_homeGateway</variablePath>
                          </variablePathList>
                        </formReference>
                        <label>Home Gateway</label>
                        <visible type="varPath">
                          <variablePathList>
                            <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/permMethod_isHGWVisible</variablePath>
                          </variablePathList>
                        </visible>
                      </element>
                    </elementList>
                  </element>
                </elementList>
              </override>
            </overrideList>
          </overlay>
          <overlay name="Menu" type="exov">
            <base>doc_com.conceptwave.system.Document/ui_UserInterface/frmui_Forms/exov_Menu</base>
            <extends>doc_com.conceptwave.system.Document/ui_UserInterface/frmui_Forms/exov_Menu</extends>
            <label>Menu</label>
            <overrideList>
              <override name="hl1" type="elext"/>
            </overrideList>
          </overlay>
          <overlay name="ONT" type="vform">
            <label>ONT</label>
            <root name="VerticalLayout" type="elvlt">
              <width>100%</width>
              <elementList>
                <element name="ONTOriginalData" type="elgrd">
                  <cellBorderStyle>cellDark</cellBorderStyle>
                  <colWidths>250px</colWidths>
                  <membersMargin>5</membersMargin>
                  <numOfCols>3</numOfCols>
                  <redrawOnResize>true</redrawOnResize>
                  <showEdge>true</showEdge>
                  <width>100%</width>
                  <elementList>
                    <element name="ONTHeaderOriginal" type="elhdr">
                      <label>Dados do Equipamento Instalado no Cliente</label>
                    </element>
                    <element name="RowSpacer4" type="elrsp">
                      <height>1px</height>
                      <rowSpan>1px</rowSpan>
                    </element>
                    <element name="numeroSerieONT_Original" type="elfld">
                      <columnSpan>0</columnSpan>
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>dtype_com.conceptwave.system.Boolean/leaf_FALSE</variablePath>
                        </variablePathList>
                      </editable>
                      <labeAlign>left</labeAlign>
                      <label>Número de Série</label>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uivar_model</variablePath>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/leaf_numeroSerieONT_Original</variablePath>
                        </variablePathList>
                      </variable>
                    </element>
                    <element name="foiDevolvidoONT_Original" type="elrgrp">
                      <defaultEnum>yes/no</defaultEnum>
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/permMethod_isNotNewEquip</variablePath>
                        </variablePathList>
                      </editable>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uivar_model</variablePath>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/leaf_foiDevolvidoONT_Original</variablePath>
                        </variablePathList>
                      </variable>
                    </element>
                    <element name="motivoONT1" type="elfld">
                      <columnSpan>0</columnSpan>
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/permMethod_isNotNewEquip</variablePath>
                        </variablePathList>
                      </editable>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uivar_model</variablePath>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/leaf_motivoONT</variablePath>
                        </variablePathList>
                      </variable>
                    </element>
                    <element name="RowSpacer5" type="elrsp">
                      <height>1px</height>
                      <rowSpan>1px</rowSpan>
                    </element>
                    <element name="codOperacao1" type="elfld">
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>dtype_com.conceptwave.system.Boolean/leaf_FALSE</variablePath>
                        </variablePathList>
                      </editable>
                      <label>Código da Operação</label>
                      <startRow>true</startRow>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uivar_model</variablePath>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/leaf_codOperacao</variablePath>
                        </variablePathList>
                      </variable>
                    </element>
                    <element name="nomeCPE_ONT_Original" type="elslct">
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>dtype_com.conceptwave.system.Boolean/leaf_FALSE</variablePath>
                        </variablePathList>
                      </editable>
                      <label>Nome do CPE</label>
                      <onChangeMethod type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uimthd_onUpdateNomeCPE</variablePath>
                        </variablePathList>
                      </onChangeMethod>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uivar_model</variablePath>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/leaf_nomeCPE_ONT_Original</variablePath>
                        </variablePathList>
                      </variable>
                    </element>
                    <element name="codEquipamentoONT_Original" type="elfld">
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>dtype_com.conceptwave.system.Boolean/leaf_FALSE</variablePath>
                        </variablePathList>
                      </editable>
                      <label>Código do Equipamento</label>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uivar_model</variablePath>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/leaf_codEquipamentoONT_Original</variablePath>
                        </variablePathList>
                      </variable>
                    </element>
                  </elementList>
                </element>
                <element name="ONTNewData" type="elgrd">
                  <cellBorderStyle>cellDark</cellBorderStyle>
                  <colWidths>250px</colWidths>
                  <membersMargin>5</membersMargin>
                  <numOfCols>3</numOfCols>
                  <showEdge>true</showEdge>
                  <width>100%</width>
                  <elementList>
                    <element name="ONTHeader" type="elhdr">
                      <label>Dados do Equipamento a Instalar no Cliente</label>
                      <padding>0</padding>
                    </element>
                    <element name="RowSpacer3" type="elrsp">
                      <height>1px</height>
                      <rowSpan>1px</rowSpan>
                    </element>
                    <element name="numeroSerieONT" type="elfld">
                      <canSort>false</canSort>
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/permMethod_ONTSerialNumberPermission</variablePath>
                        </variablePathList>
                      </editable>
                      <label>Numero de Série</label>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uivar_model</variablePath>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/leaf_numeroSerieONT</variablePath>
                        </variablePathList>
                      </variable>
                    </element>
                    <element name="nomeCPE" type="elslct">
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/permMethod_ONTSerialNumberPermission</variablePath>
                        </variablePathList>
                      </editable>
                      <label>Nome do CPE</label>
                      <onChangeMethod type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uimthd_onUpdateNomeCPE</variablePath>
                        </variablePathList>
                      </onChangeMethod>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uivar_model</variablePath>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/leaf_nomeCPE</variablePath>
                        </variablePathList>
                      </variable>
                    </element>
                    <element name="codEquipamento" type="elfld">
                      <columnSpan>0</columnSpan>
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>dtype_com.conceptwave.system.Boolean/leaf_FALSE</variablePath>
                        </variablePathList>
                      </editable>
                      <label>Código do Equipamento</label>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uivar_model</variablePath>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/leaf_codEquipamento</variablePath>
                        </variablePathList>
                      </variable>
                    </element>
                    <element name="RowSpacer2" type="elrsp">
                      <height>1px</height>
                      <rowSpan>1px</rowSpan>
                    </element>
                    <element name="codOperacao" type="elfld">
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>dtype_com.conceptwave.system.Boolean/leaf_FALSE</variablePath>
                        </variablePathList>
                      </editable>
                      <label>Código da Operação</label>
                      <startRow>true</startRow>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uivar_model</variablePath>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/leaf_codOperacao</variablePath>
                        </variablePathList>
                      </variable>
                    </element>
                    <element name="isSAP" type="elchk">
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>dtype_com.conceptwave.system.Boolean/leaf_FALSE</variablePath>
                        </variablePathList>
                      </editable>
                      <label>Consulta SAP</label>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uivar_model</variablePath>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/leaf_isSAP</variablePath>
                        </variablePathList>
                      </variable>
                    </element>
                    <element name="isNETWIN" type="elchk">
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>dtype_com.conceptwave.system.Boolean/leaf_FALSE</variablePath>
                        </variablePathList>
                      </editable>
                      <label>Atualizar Inventário</label>
                      <labelOrientation>top</labelOrientation>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uivar_model</variablePath>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/leaf_isNETWIN</variablePath>
                        </variablePathList>
                      </variable>
                    </element>
                  </elementList>
                </element>
                <element name="actionButtons" type="elgrd">
                  <cellPadding>4</cellPadding>
                  <numOfCols>5</numOfCols>
                  <width>521px</width>
                  <elementList>
                    <element name="trocaCPE" type="elbtn">
                      <clickMethod type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/usrActionMethod_trocaCPEONT</variablePath>
                        </variablePathList>
                      </clickMethod>
                      <columnSpan>0</columnSpan>
                      <disabled type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/permMethod_permTrocaCPE</variablePath>
                        </variablePathList>
                      </disabled>
                      <label>Trocar CPE</label>
                      <padding>0</padding>
                      <visible type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/permMethod_visibleChangeCPEONTPermission</variablePath>
                        </variablePathList>
                      </visible>
                    </element>
                    <element name="validarCPE" type="elbtn">
                      <clickMethod type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/usrActionMethod_validateCPEONT</variablePath>
                        </variablePathList>
                      </clickMethod>
                      <label>Validar CPE</label>
                      <visible type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/permMethod_visibleButtonCPEPermission</variablePath>
                        </variablePathList>
                      </visible>
                    </element>
                    <element name="associarCPE" type="elbtn">
                      <clickMethod type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/usrActionMethod_associarCPEONT</variablePath>
                        </variablePathList>
                      </clickMethod>
                      <label>Associar CPE</label>
                      <visible type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/permMethod_visibleButtonCPEPermission</variablePath>
                        </variablePathList>
                      </visible>
                    </element>
                    <element name="refreshCPE" type="elbtn">
                      <clickMethod type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uimthd_refreshONTChangeCPEGrid</variablePath>
                        </variablePathList>
                      </clickMethod>
                      <label>Refresh</label>
                      <visible type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/permMethod_visibleRefreshButtonPermission</variablePath>
                        </variablePathList>
                      </visible>
                    </element>
                  </elementList>
                </element>
                <element name="CPEChangeGrid" type="elovf">
                  <formReference type="varPath">
                    <variablePathList>
                      <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/leaf_changeCPEGridFinderUI</variablePath>
                      <variablePath>findDoc_FTTHOrder.changeCPEGridFinder/ui_UserInterface/frmui_Forms</variablePath>
                      <variablePath>findDoc_FTTHOrder.changeCPEGridFinder/ui_UserInterface/frmui_Forms/exov_Result</variablePath>
                    </variablePathList>
                  </formReference>
                  <height>200px</height>
                  <variable type="varPath">
                    <variablePathList>
                      <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/leaf_changeCPEGridFinderUI</variablePath>
                    </variablePathList>
                  </variable>
                </element>
              </elementList>
            </root>
          </overlay>
          <overlay name="homeGateway" type="vform">
            <label>homeGateway</label>
            <root name="VerticalLayout" type="elvlt">
              <width>100%</width>
              <elementList>
                <element name="HGWOriginalData" type="elgrd">
                  <colWidths>250px</colWidths>
                  <membersMargin>5</membersMargin>
                  <numOfCols>3</numOfCols>
                  <showEdge>true</showEdge>
                  <width>100%</width>
                  <elementList>
                    <element name="homeGatewayHeaderOriginal" type="elhdr">
                      <label>Dados do Equipamento Instalado no Cliente</label>
                    </element>
                    <element name="RowSpacer4" type="elrsp">
                      <height>1px</height>
                      <rowSpan>1px</rowSpan>
                    </element>
                    <element name="numeroSerieHGW_Original" type="elfld">
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>dtype_com.conceptwave.system.Boolean/leaf_FALSE</variablePath>
                        </variablePathList>
                      </editable>
                      <label>Numero de Série</label>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uivar_model</variablePath>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/leaf_numeroSerieHGW_Original</variablePath>
                        </variablePathList>
                      </variable>
                    </element>
                    <element name="foiDevolvidoHGW_Original" type="elrgrp">
                      <defaultEnum>yes/no</defaultEnum>
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/permMethod_isNotNewEquip</variablePath>
                        </variablePathList>
                      </editable>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uivar_model</variablePath>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/leaf_foiDevolvidoHGW_Original</variablePath>
                        </variablePathList>
                      </variable>
                    </element>
                    <element name="motivoHomeGateway1" type="elfld">
                      <columnSpan>0</columnSpan>
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/permMethod_isNotNewEquip</variablePath>
                        </variablePathList>
                      </editable>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uivar_model</variablePath>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/leaf_motivoHomeGateway</variablePath>
                        </variablePathList>
                      </variable>
                    </element>
                    <element name="RowSpacer5" type="elrsp">
                      <height>1px</height>
                      <rowSpan>1px</rowSpan>
                    </element>
                    <element name="codOperacaoHGW1" type="elfld">
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>dtype_com.conceptwave.system.Boolean/leaf_FALSE</variablePath>
                        </variablePathList>
                      </editable>
                      <label>Código da Operação</label>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uivar_model</variablePath>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/leaf_codOperacaoHGW</variablePath>
                        </variablePathList>
                      </variable>
                    </element>
                    <element name="nomeCPE_HGW_Original" type="elslct">
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>dtype_com.conceptwave.system.Boolean/leaf_FALSE</variablePath>
                        </variablePathList>
                      </editable>
                      <label>Nome do CPE</label>
                      <onChangeMethod type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uimthd_onUpdateNomeCPEHGW</variablePath>
                        </variablePathList>
                      </onChangeMethod>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uivar_model</variablePath>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/leaf_nomeCPE_HGW_Original</variablePath>
                        </variablePathList>
                      </variable>
                    </element>
                    <element name="codEquipamentoHGW_Original" type="elfld">
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>dtype_com.conceptwave.system.Boolean/leaf_FALSE</variablePath>
                        </variablePathList>
                      </editable>
                      <label>Código do Equipamento</label>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uivar_model</variablePath>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/leaf_codEquipamentoHGW_Original</variablePath>
                        </variablePathList>
                      </variable>
                    </element>
                  </elementList>
                </element>
                <element name="HGWNewData" type="elgrd">
                  <colWidths>250px</colWidths>
                  <membersMargin>5</membersMargin>
                  <numOfCols>3</numOfCols>
                  <showEdge>true</showEdge>
                  <width>100%</width>
                  <elementList>
                    <element name="homeGatewayHeader" type="elhdr">
                      <label>Dados do Equipamento a Instalar no Cliente</label>
                      <padding>0</padding>
                    </element>
                    <element name="RowSpacer2" type="elrsp">
                      <height>1px</height>
                      <rowSpan>1px</rowSpan>
                    </element>
                    <element name="numeroSerieHomeGateway" type="elfld">
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/permMethod_InstallRemoveEquipmentPermission</variablePath>
                        </variablePathList>
                      </editable>
                      <label>Numero de Série</label>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uivar_model</variablePath>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/leaf_numeroSerieHomeGateway</variablePath>
                        </variablePathList>
                      </variable>
                    </element>
                    <element name="nomeCPEHGW" type="elslct">
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/permMethod_InstallRemoveEquipmentPermission</variablePath>
                        </variablePathList>
                      </editable>
                      <label>Nome do CPE</label>
                      <onChangeMethod type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uimthd_onUpdateNomeCPEHGW</variablePath>
                        </variablePathList>
                      </onChangeMethod>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uivar_model</variablePath>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/leaf_nomeCPEHGW</variablePath>
                        </variablePathList>
                      </variable>
                    </element>
                    <element name="codEquipamentoHGW" type="elfld">
                      <columnSpan>0</columnSpan>
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>dtype_com.conceptwave.system.Boolean/leaf_FALSE</variablePath>
                        </variablePathList>
                      </editable>
                      <label>Código do Equipamento</label>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uivar_model</variablePath>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/leaf_codEquipamentoHGW</variablePath>
                        </variablePathList>
                      </variable>
                    </element>
                    <element name="RowSpacer3" type="elrsp">
                      <height>1px</height>
                      <rowSpan>1px</rowSpan>
                    </element>
                    <element name="codOperacaoHGW" type="elfld">
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>dtype_com.conceptwave.system.Boolean/leaf_FALSE</variablePath>
                        </variablePathList>
                      </editable>
                      <label>Código da Operação</label>
                      <startRow>true</startRow>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uivar_model</variablePath>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/leaf_codOperacaoHGW</variablePath>
                        </variablePathList>
                      </variable>
                    </element>
                    <element name="isSAPHGW" type="elchk">
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>dtype_com.conceptwave.system.Boolean/leaf_FALSE</variablePath>
                        </variablePathList>
                      </editable>
                      <label>Consulta SAP</label>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uivar_model</variablePath>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/leaf_isSAPHGW</variablePath>
                        </variablePathList>
                      </variable>
                    </element>
                    <element name="isNETWINHGW" type="elchk">
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>dtype_com.conceptwave.system.Boolean/leaf_FALSE</variablePath>
                        </variablePathList>
                      </editable>
                      <label>Atualizar Inventário</label>
                      <labelOrientation>top</labelOrientation>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uivar_model</variablePath>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/leaf_isNETWINHGW</variablePath>
                        </variablePathList>
                      </variable>
                    </element>
                  </elementList>
                </element>
                <element name="actionButtons" type="elgrd">
                  <numOfCols>5</numOfCols>
                  <width>521px</width>
                  <elementList>
                    <element name="validarCPE" type="elbtn">
                      <clickMethod type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/usrActionMethod_validateCPEHGW</variablePath>
                        </variablePathList>
                      </clickMethod>
                      <label>Validar CPE</label>
                      <startRow>true</startRow>
                      <visible type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/permMethod_visibleButtonCPEHGWPermission</variablePath>
                        </variablePathList>
                      </visible>
                    </element>
                    <element name="associarCPE" type="elbtn">
                      <clickMethod type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/usrActionMethod_associarCPEHGW</variablePath>
                        </variablePathList>
                      </clickMethod>
                      <label>Associar CPE</label>
                      <visible type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/permMethod_visibleButtonCPEHGWPermission</variablePath>
                        </variablePathList>
                      </visible>
                    </element>
                    <element name="trocaCPE" type="elbtn">
                      <clickMethod type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/usrActionMethod_trocaCPEHGW</variablePath>
                        </variablePathList>
                      </clickMethod>
                      <disabled type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/permMethod_permTrocaCPE</variablePath>
                        </variablePathList>
                      </disabled>
                      <label>Trocar CPE</label>
                      <visible type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/permMethod_visibleChangeCPEHGWPermission</variablePath>
                        </variablePathList>
                      </visible>
                    </element>
                    <element name="refreshCPE" type="elbtn">
                      <clickMethod type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uimthd_refreshHGWChangeCPEGrid</variablePath>
                        </variablePathList>
                      </clickMethod>
                      <label>Refresh</label>
                      <visible type="varPath">
                        <variablePathList>
                          <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/permMethod_visibleRefreshButtonPermission</variablePath>
                        </variablePathList>
                      </visible>
                    </element>
                  </elementList>
                </element>
                <element name="CPEChangeGrid" type="elovf">
                  <formReference type="varPath">
                    <variablePathList>
                      <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/leaf_changeCPEGridFinderUI</variablePath>
                      <variablePath>findDoc_FTTHOrder.changeCPEGridFinder/ui_UserInterface/frmui_Forms</variablePath>
                      <variablePath>findDoc_FTTHOrder.changeCPEGridFinder/ui_UserInterface/frmui_Forms/exov_Result</variablePath>
                    </variablePathList>
                  </formReference>
                  <height>200px</height>
                  <variable type="varPath">
                    <variablePathList>
                      <variablePath>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/leaf_changeCPEGridFinderUI</variablePath>
                    </variablePathList>
                  </variable>
                </element>
              </elementList>
            </root>
          </overlay>
        </overlayList>
      </vform>
    </vformList>
    <methodList>
      <method name="onInit" type="action">
        <valueType>nmeta_com.conceptwave.system.Object</valueType>
        <script><![CDATA[
          this.model.tabname = "ONT";
          this.cw$super_onInit();
          this.changeCPEGridFinderUI = new FTTHOrder.changeCPEGridFinder.UserInterface(null, this);
          this.changeCPEGridFinderUI.model.searchDocument.cwOrderId = this.model.order.id;
          this.refreshONTChangeCPEGrid();
        ]]></script>
      </method>
      <method name="validateCPEONT" type="usrActionMethod">
        <confirmation>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uimthd_validateCPEONT_confirm</confirmation>
        <dialogHeight>800</dialogHeight>
        <dialogWidth>700</dialogWidth>
        <showInPopup>true</showInPopup>
        <script><![CDATA[
          FTTHOrder.execValidateProcess("Validar CPE", "ONT", this.model, UserProfile.getUserTask());
          this.model.isNETWIN = false;
          this.model.isSAP = false;
          this.model.save();
        ]]></script>
      </method>
      <method name="validateCPEONT_confirm" type="uimthd">
        <script><![CDATA[
          if(!this.model.numeroSerieONT){
             Global.throwException("Campo numeroSerieONT não preenchido");
          }

          if(!this.model.codEquipamento){
              Global.throwException("Campo Código Equipamento não preenchido");
                      }

          var ord = Order.getOrderById(this.model.cwOrderId);

          if(!ord.ManualActivityData[ord.ManualActivityData.length -1].ManualActivityData.codigoPSR){
              Global.throwException("Campo Código da PSR não preenchido");
          }

          return null;
        ]]></script>
      </method>
      <method name="validateCPEHGW" type="usrActionMethod">
        <confirmation>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uimthd_validateCPEHGW_confirm</confirmation>
        <dialogHeight>800</dialogHeight>
        <dialogWidth>700</dialogWidth>
        <showInPopup>true</showInPopup>
        <script><![CDATA[
          FTTHOrder.execValidateProcess("Validar CPE", "HGW", this.model, UserProfile.getUserTask());
          this.model.isNETWINHGW = false;
          this.model.isSAPHGW = false;
          this.model.save();
        ]]></script>
      </method>
      <method name="validateCPEHGW_confirm" type="uimthd">
        <script><![CDATA[
          if(!this.model.numeroSerieHomeGateway){
             Global.throwException("Campo numeroSerieHomeGateway não preenchido");
          }

          if(!this.model.codEquipamentoHGW){
              Global.throwException("Campo Código Equipamento não preenchido");
          }

          var ord = Order.getOrderById(this.model.cwOrderId);

          if(!ord.ManualActivityData[ord.ManualActivityData.length -1].ManualActivityData.codigoPSR){
              Global.throwException("Campo Código da PSR não preenchido");
          }

          return null;
        ]]></script>
      </method>
      <method name="associarCPEONT" type="usrActionMethod">
        <confirmation>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uimthd_associarCPEONT_confirm</confirmation>
        <dialogHeight>800</dialogHeight>
        <dialogWidth>700</dialogWidth>
        <showInPopup>true</showInPopup>
        <script><![CDATA[
          if (FTTHOrder.isEquipmentLocked('ONT', 'ONT', this.model.cwOrderId)) {
              Global.showUserMessage("O processo já foi iniciado. Por favor aguarde.")
              FTTHOrder.refreshForm(this.model);
              FTTHOrder.refreshGrid(this.model, "ONT", this.changeCPEGridFinderUI);
          } else {
              FTTHOrder.execValidateProcess("Associar CPE", "ONT", this.model, UserProfile.getUserTask());
              this.model.isNETWIN = false;
              this.model.isSAP = false;
              this.model.save();
          }
        ]]></script>
      </method>
      <method name="associarCPEONT_confirm" type="uimthd">
        <script><![CDATA[
          if(!this.model.numeroSerieONT){
             Global.throwException("Campo numeroSerieONT não preenchido");
          }

          if(!this.model.codEquipamento){
              Global.throwException("Campo Código Equipamento não preenchido");
          }

          var ord = Order.getOrderById(this.model.cwOrderId);

          if(!ord.ManualActivityData[ord.ManualActivityData.length -1].ManualActivityData.codigoPSR){
              Global.throwException("Campo Código da PSR não preenchido");
          }

          var orderType = ord.OrderHeader.tipoOS;
          if(orderType == "TIPO_ORDEM_RETIRADA"){
              Global.throwException("Operação não permitida para este tipo de ordem");
          }

          var isMudancaEndereco = false;
          var ops = FTTHCommon.createEmptyDoc('FTTHOrderManagementInterface:OrderParametersSearch');
          ops.cwOrderId = ord.OrderHeader.cwOrderId;

          var orderRequest = Finder.runSearch('FTTHOrderManagementInterface:OrderRequestFinder', ops);

          if (orderRequest.size > 0) {
              for (var i = 0; i < orderRequest.size; i++) {
                  var solicitacao = orderRequest[i];
                  if(solicitacao.idSolicitacao == "MUDANCA_ENDERECO"){
                      isMudancaEndereco = true;
                      break;
          }
              }
          }

          if(this.model.numeroSerieONT == this.model.numeroSerieONT_Original && !isMudancaEndereco){
            Global.throwException("Números de série, não podem ser iguais");
          }

          return null;
        ]]></script>
      </method>
      <method name="associarCPEHGW" type="usrActionMethod">
        <confirmation>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uimthd_associarCPEHGW_confirm</confirmation>
        <dialogHeight>800</dialogHeight>
        <dialogWidth>700</dialogWidth>
        <showInPopup>true</showInPopup>
        <script><![CDATA[
          if (FTTHOrder.isEquipmentLocked('HGW', 'HGW', this.model.cwOrderId)) {
              Global.showUserMessage("O processo já foi iniciado. Por favor aguarde.")
              FTTHOrder.refreshForm(this.model);
              FTTHOrder.refreshGrid(this.model, "HGW", this.changeCPEGridFinderUI);
          } else {
              FTTHOrder.execValidateProcess("Associar CPE", "HGW", this.model, UserProfile.getUserTask());
              this.model.isNETWINHGW = false;
              this.model.isSAPHGW = false;
              this.model.save();
          }
        ]]></script>
      </method>
      <method name="associarCPEHGW_confirm" type="uimthd">
        <script><![CDATA[
          if(!this.model.numeroSerieHomeGateway){
             Global.throwException("Campo numeroSerieHomeGateway não preenchido");
          }

          if(!this.model.codEquipamentoHGW){
              Global.throwException("Campo Código Equipamento não preenchido");
          }

          var ord = Order.getOrderById(this.model.cwOrderId);

          if(!ord.ManualActivityData[ord.ManualActivityData.length -1].ManualActivityData.codigoPSR){
              Global.throwException("Campo Código da PSR não preenchido");
          }

          var orderType = ord.OrderHeader.tipoOS;
          if(orderType == "TIPO_ORDEM_RETIRADA"){
              Global.throwException("Operação não permitida para este tipo de ordem");
          }


          if(this.model.numeroSerieHomeGateway == this.model.numeroSerieHGW_Original){
            Global.throwException("Números de série, não podem ser iguais");
          }

          return null;
        ]]></script>
      </method>
      <method name="trocaCPEONT" type="usrActionMethod">
        <confirmation>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uimthd_associarCPEONT_confirm</confirmation>
        <dialogHeight>800</dialogHeight>
        <dialogWidth>700</dialogWidth>
        <showInPopup>true</showInPopup>
        <script><![CDATA[
          if (FTTHOrder.isEquipmentLocked('ONT', 'HGONTW', this.model.cwOrderId)) {
              Global.showUserMessage("O processo já foi iniciado. Por favor aguarde.")
              FTTHOrder.refreshForm(this.model);
              FTTHOrder.refreshGrid(this.model, "ONT", this.changeCPEGridFinderUI);
          } else {
              FTTHOrder.execValidateProcess("Trocar CPE", "ONT", this.model, UserProfile.getUserTask());
              this.model.isNETWIN = false;
              this.model.isSAP = false;
              this.model.save();
          }
        ]]></script>
      </method>
      <method name="trocaCPEHGW" type="usrActionMethod">
        <confirmation>doc_FTTHOrder.BaseEquipmentData/ui_UserInterface/uimthd_associarCPEHGW_confirm</confirmation>
        <dialogHeight>800</dialogHeight>
        <dialogWidth>700</dialogWidth>
        <showInPopup>true</showInPopup>
        <script><![CDATA[
          if (FTTHOrder.isEquipmentLocked('HGW', 'HGW', this.model.cwOrderId)) {
              Global.showUserMessage("O processo já foi iniciado. Por favor aguarde.")
              FTTHOrder.refreshForm(this.model);
              FTTHOrder.refreshGrid(this.model, "HGW", this.changeCPEGridFinderUI);
          } else {
              FTTHOrder.execValidateProcess("Trocar CPE", "HGW", this.model, UserProfile.getUserTask());
              this.model.isNETWINHGW = false;
              this.model.isSAPHGW = false;
              this.model.save();
          }
        ]]></script>
      </method>
      <method name="refreshONTChangeCPEGrid" type="uimthd">
        <script><![CDATA[
          FTTHOrder.refreshForm(this.model);
          FTTHOrder.refreshGrid(this.model, "ONT", this.changeCPEGridFinderUI);
        ]]></script>
      </method>
      <method name="refreshHGWChangeCPEGrid" type="uimthd">
        <script><![CDATA[
          FTTHOrder.refreshForm(this.model);
          FTTHOrder.refreshGrid(this.model, "HGW", this.changeCPEGridFinderUI);
        ]]></script>
      </method>
      <method name="visibleButtonCPEPermission" type="permMethod">
        <script><![CDATA[
          var ord = Order.getOrderById(this.model.cwOrderId);
          var actualTask = UserProfile.getUserTask();
          var isNewData =  false;

          if (this.model.flagDadoOriginal=="N"){
              isNewData =  true;
          }





          var ops = new Document('FTTHOrderManagementInterface:OrderParametersSearch');
          ops.cwOrderId = this.model.cwOrderId;
          var isMudancaEndereco = false;

          var orderRequest = Finder.runSearch('FTTHOrderManagementInterface:OrderRequestFinder', ops);
          if (orderRequest.size > 0) {
              for (var i = 0; i < orderRequest.size; i++) {
                  var solicitacao = orderRequest[i];

                  if(solicitacao.idSolicitacao == "MUDANCA_ENDERECO"){
                      isMudancaEndereco = true;
                  }
              }
          }

          if(FTTHCommon.getOrderType(this.model.cwOrderId) == "MUDANCA_ENDERECO"){
              isMudancaEndereco = true;
          }

          if(isMudancaEndereco && isNewData){
          return false;
          }

          switch(actualTask) {
              case "FTTHUserInterface.InstallRemoveEquipmentManualTaskInterface/InstallRemoveEquipmentTask":
                  return (isNewData) ? ((!hasAssociationHappened(this) && !this.model.cpeHasChanged) && !FTTHOrder.isEquipmentLocked("ONT", "ONT", this.model.cwOrderId)) : false;
                  break;
              case "FTTHUserInterface.ClickManualActivityInterface/BAOpenningOperation":
                  return (isNewData) ? ((!hasAssociationHappened(this) && !this.model.cpeHasChanged) && !FTTHOrder.isEquipmentLocked('ONT', "ONT", this.model.cwOrderId)) : false;
                  break;
              case "FTTHUserInterface.SGFTManualActivityInterface/SGFTBAOpenning":
                  return false;
                  break;
              default:
                  return false;
          }

          function hasAssociationHappened(self) {
              var searchDoc = new Document('FTTHCommon.ActivityClick');
              searchDoc.operacao = 'Associar CPE';
              searchDoc.equipmentType = 'ONT';
              searchDoc.equipmentId = 'ONT';
              searchDoc.cwOrderId = self.model.cwOrderId;
              searchDoc.status = 'SUCCESS';
              var result = Finder.runSearch('FTTHCommon:activityClickFinder', searchDoc);
              return (result.length == 3); //VALID + INVENT + ATIV
          }
        ]]></script>
      </method>
      <method name="visibleButtonCPEHGWPermission" type="permMethod">
        <script><![CDATA[
          var ord = Order.getOrderById(this.model.cwOrderId);
          var actualTask = UserProfile.getUserTask();
          var isNewData =  false;

          if (this.model.flagDadoOriginal=="N"){
              isNewData =  true;
          }

          var ops = new Document('FTTHOrderManagementInterface:OrderParametersSearch');
          ops.cwOrderId = this.model.cwOrderId;
          var isMudancaEndereco = false;
          var orderRequest = Finder.runSearch('FTTHOrderManagementInterface:OrderRequestFinder', ops);
          if (orderRequest.size > 0) {
              for (var i = 0; i < orderRequest.size; i++) {
                  var solicitacao = orderRequest[i];

                  if(solicitacao.idSolicitacao == "MUDANCA_ENDERECO"){
                      isMudancaEndereco = true;
                  }
              }
          }

          if(FTTHCommon.getOrderType(this.model.cwOrderId) == "MUDANCA_ENDERECO"){
              isMudancaEndereco = true;
          }

          if(isMudancaEndereco && isNewData){
              return false;
          }

          switch(actualTask) {
              case "FTTHUserInterface.InstallRemoveEquipmentManualTaskInterface/InstallRemoveEquipmentTask":
                  return (isNewData) ? ((!hasAssociationHappened(this) && !this.model.cpeHasChangedHGW) && !FTTHOrder.isEquipmentLocked("HGW", "HGW", this.model.cwOrderId)) : false;
                  break;
              case "FTTHUserInterface.ClickManualActivityInterface/BAOpenningOperation":
                  return (isNewData) ? ((!hasAssociationHappened(this) && !this.model.cpeHasChangedHGW) && !FTTHOrder.isEquipmentLocked('HGW', "HGW", this.model.cwOrderId)) : false;
                  break;
              case "FTTHUserInterface.SGFTManualActivityInterface/SGFTBAOpenning":
                  return false;
                  break;
              default:
                  return false;
          }

          function hasAssociationHappened(self) {
              var searchDoc = new Document('FTTHCommon.ActivityClick');
              searchDoc.operacao = 'Associar CPE';
              searchDoc.equipmentType = 'HGW';
              searchDoc.equipmentId = 'HGW';
              searchDoc.cwOrderId = self.model.cwOrderId;
              searchDoc.status = 'SUCCESS';
              var result = Finder.runSearch('FTTHCommon:activityClickFinder', searchDoc);
              return (result.length == 2);//VALID + INVENT
          }
        ]]></script>
      </method>
      <method name="visibleChangeCPEONTPermission" type="permMethod">
        <script><![CDATA[
          var ord = Order.getOrderById(this.model.cwOrderId);
          var actualTask = UserProfile.getUserTask();
          var isNewData =  false;

          if (this.model.flagDadoOriginal=="N"){
              isNewData =  true;
          }


          var ops = new Document('FTTHOrderManagementInterface:OrderParametersSearch');
          ops.cwOrderId = this.model.cwOrderId;
          var isMudancaEndereco = false;

          var orderRequest = Finder.runSearch('FTTHOrderManagementInterface:OrderRequestFinder', ops);
          if (orderRequest.size > 0) {
              for (var i = 0; i < orderRequest.size; i++) {
                  var solicitacao = orderRequest[i];

                  if(solicitacao.idSolicitacao == "MUDANCA_ENDERECO"){
                      isMudancaEndereco = true;
                  }

                  if(solicitacao.tipoOrdemServico == 'TIPO_ORDEM_RETIRADA'){
                      return false;
                  }
               }
          }

          if(FTTHCommon.getOrderType(this.model.cwOrderId) == "MUDANCA_ENDERECO"){
              isMudancaEndereco = true;
          }

          if(isMudancaEndereco && isNewData){
              return false;
          }

          switch(actualTask) {
              case "FTTHUserInterface.InstallRemoveEquipmentManualTaskInterface/InstallRemoveEquipmentTask":
                  return (isNewData) ? ( (hasAssociationHappened(this) || this.model.cpeHasChanged) && !FTTHOrder.isEquipmentLocked("ONT", "ONT", this.model.cwOrderId)) : !FTTHOrder.isEquipmentLocked("ONT", "ONT", this.model.cwOrderId);
                  break;
              case "FTTHUserInterface.ClickManualActivityInterface/BAOpenningOperation":
                  return (isNewData) ? ( (hasAssociationHappened(this) || this.model.cpeHasChanged) && !FTTHOrder.isEquipmentLocked("ONT", "ONT", this.model.cwOrderId)) : !FTTHOrder.isEquipmentLocked("ONT", "ONT", this.model.cwOrderId);
                  break;
              case "FTTHUserInterface.SGFTManualActivityInterface/SGFTBAOpenning":
                  return (isNewData) ? ( (hasAssociationHappened(this) || this.model.cpeHasChanged) && !FTTHOrder.isEquipmentLocked("ONT", "ONT", this.model.cwOrderId)) : !FTTHOrder.isEquipmentLocked("ONT", "ONT", this.model.cwOrderId);
                  break;
              default:
                  return false;
          }

          function hasAssociationHappened(self) { //checa se a Associação já aconteceu
              var searchDoc = new Document('FTTHCommon.ActivityClick');
              searchDoc.operacao = 'Associar CPE';
              searchDoc.equipmentType = "ONT";
              searchDoc.equipmentId = "ONT";
              searchDoc.cwOrderId = self.model.cwOrderId;
              searchDoc.status = 'SUCCESS';
              var result = Finder.runSearch('FTTHCommon:activityClickFinder', searchDoc);
              return (result.length == 3); //VALID + INVENT + ATIV
          }
        ]]></script>
      </method>
      <method name="visibleChangeCPEHGWPermission" type="permMethod">
        <script><![CDATA[
          var ord = Order.getOrderById(this.model.cwOrderId);
          var actualTask = UserProfile.getUserTask();
          var isNewData =  false;

          if (this.model.flagDadoOriginal=="N"){
              isNewData =  true;
          }


          var ops = new Document('FTTHOrderManagementInterface:OrderParametersSearch');
          ops.cwOrderId = this.model.cwOrderId;
          var isMudancaEndereco = false;

          var orderRequest = Finder.runSearch('FTTHOrderManagementInterface:OrderRequestFinder', ops);
          if (orderRequest.size > 0) {
              for (var i = 0; i < orderRequest.size; i++) {
                  var solicitacao = orderRequest[i];

                  if(solicitacao.idSolicitacao == "MUDANCA_ENDERECO"){
                      isMudancaEndereco = true;
                  }

                  if(solicitacao.tipoOrdemServico == 'TIPO_ORDEM_RETIRADA'){
                      return false;
                  }
               }
          }

          if(FTTHCommon.getOrderType(this.model.cwOrderId) == "MUDANCA_ENDERECO"){
              isMudancaEndereco = true;
          }

          if(isMudancaEndereco && isNewData){
              return false;
          }


          switch(actualTask) {
              case "FTTHUserInterface.InstallRemoveEquipmentManualTaskInterface/InstallRemoveEquipmentTask":
                  return (isNewData) ? ( (hasAssociationHappened(this) || this.model.cpeHasChangedHGW) && !FTTHOrder.isEquipmentLocked("HGW", "HGW", this.model.cwOrderId)) : !FTTHOrder.isEquipmentLocked("ONT", "ONT", this.model.cwOrderId);
                  break;
              case "FTTHUserInterface.ClickManualActivityInterface/BAOpenningOperation":
                  return (isNewData) ? ( (hasAssociationHappened(this) || this.model.cpeHasChangedHGW) && !FTTHOrder.isEquipmentLocked("HGW", "HGW", this.model.cwOrderId)) : !FTTHOrder.isEquipmentLocked("ONT", "ONT", this.model.cwOrderId);
                  break;
              case "FTTHUserInterface.SGFTManualActivityInterface/SGFTBAOpenning":
                  return (isNewData) ? ( (hasAssociationHappened(this) || this.model.cpeHasChangedHGW) && !FTTHOrder.isEquipmentLocked("HGW", "HGW", this.model.cwOrderId)) : !FTTHOrder.isEquipmentLocked("ONT", "ONT", this.model.cwOrderId);
                  break;
              default:
                  return false;
          }

          function hasAssociationHappened(self) { //checa se a Associação já aconteceu
              var searchDoc = new Document('FTTHCommon.ActivityClick');
              searchDoc.operacao = 'Associar CPE';
              searchDoc.equipmentType = "HGW";
              searchDoc.equipmentId = "HGW";
              searchDoc.cwOrderId = self.model.cwOrderId;
              searchDoc.status = 'SUCCESS';
              var result = Finder.runSearch('FTTHCommon:activityClickFinder', searchDoc);
              return (result.length == 2);//VALID + INVENT
          }
        ]]></script>
      </method>
      <method name="visibleRefreshButtonPermission" type="permMethod">
        <script><![CDATA[
          var actualTask = UserProfile.getUserTask();

          switch(actualTask) {
              case "FTTHUserInterface.InstallRemoveEquipmentManualTaskInterface/InstallRemoveEquipmentTask":
                  return true;
                  break;
              case "FTTHUserInterface.ClickManualActivityInterface/BAOpenningOperation":
                  return true;
                  break;
              case "FTTHUserInterface.SGFTManualActivityInterface/SGFTBAOpenning":
                  return true;
                  break;
              default:
                  return false;
          }
        ]]></script>
      </method>
      <method name="refreshTab" type="uimthd">
        <script><![CDATA[
          if(this.model.tabname == "ONT"){
              this.refreshONTChangeCPEGrid();
          //FTTHOrder.refreshGrid(this.model, "ONT", this.changeCPEGridFinderUI);
          } else {
              this.refreshHGWChangeCPEGrid();
          //FTTHOrder.refreshGrid(this.model, "HGW", this.changeCPEGridFinderUI);
          }
        ]]></script>
      </method>
      <method name="InstallRemoveEquipmentPermission" type="permMethod">
        <script><![CDATA[
          var ord = Order.getOrderById(this.model.cwOrderId);
          var actualTask = UserProfile.getUserTask();

          var isNewData = false;

          /* 20/04/2018 - Atualizando a tbi_validation para o updateStock em mudanca de endereco */
          if (this.model.flagDadoOriginal=="N"){
              isNewData =  true;
                            }
          /* end 20/04/2018 */

          var ops = new Document('FTTHOrderManagementInterface:OrderParametersSearch');
          ops.cwOrderId = this.model.cwOrderId;
          var isMudancaEndereco = false;


          var orderRequest = Finder.runSearch('FTTHOrderManagementInterface:OrderRequestFinder', ops);
          if (orderRequest.size > 0) {
              for (var i = 0; i < orderRequest.size; i++) {
                  var solicitacao = orderRequest[i];

                  if(solicitacao.idSolicitacao == "MUDANCA_ENDERECO"){
                      isMudancaEndereco = true;
                  }

                  if(solicitacao.tipoOrdemServico == 'TIPO_ORDEM_RETIRADA'){
                      return false;
                  }
               }
          }


          if(FTTHCommon.getOrderType(this.model.cwOrderId) == "MUDANCA_ENDERECO"){
              isMudancaEndereco = true;
                  }

          if(isMudancaEndereco && isNewData){
              return false;
          }






          switch(actualTask) {
              case "FTTHUserInterface.InstallRemoveEquipmentManualTaskInterface/InstallRemoveEquipmentTask":
                  return !FTTHOrder.isEquipmentLocked("HGW", "HGW", this.model.cwOrderId);
                  break;
              case "FTTHUserInterface.ClickManualActivityInterface/BAOpenningOperation":
                  return !FTTHOrder.isEquipmentLocked("HGW", "HGW", this.model.cwOrderId);
                  break;
              case "FTTHUserInterface.SGFTManualActivityInterface/SGFTBAOpenning":
                  return !FTTHOrder.isEquipmentLocked("HGW", "HGW", this.model.cwOrderId);
                  break;
              default:
                  return false;
          }
        ]]></script>
      </method>
      <method name="ONTSerialNumberPermission" type="permMethod">
        <script><![CDATA[
          var ord = Order.getOrderById(this.model.cwOrderId);
          var cwOrderId = this.model.cwOrderId;
          var orderType = ord.OrderHeader.tipoOS;
          var actualTask = UserProfile.getUserTask();
          var isNewData =  false;


          if (this.model.flagDadoOriginal=="N"){
              isNewData =  true;
          }
          var ops = new Document('FTTHOrderManagementInterface:OrderParametersSearch');
          ops.cwOrderId = cwOrderId;
          var isMudancaEndereco = false;

          var orderRequest = Finder.runSearch('FTTHOrderManagementInterface:OrderRequestFinder', ops);
          if (orderRequest.size > 0) {
              for (var i = 0; i < orderRequest.size; i++) {
                  var solicitacao = orderRequest[i];

                  if(solicitacao.idSolicitacao == "MUDANCA_ENDERECO"){
                      isMudancaEndereco = true;
                  }

                  if(solicitacao.tipoOrdemServico == 'TIPO_ORDEM_RETIRADA'){
                      return false;
                  }
              }
          }


          if(FTTHCommon.getOrderType(this.model.cwOrderId) == "MUDANCA_ENDERECO"){
              isMudancaEndereco = true;
          }

          if(isMudancaEndereco && isNewData){
              return false;
          }





          if(actualTask == "FTTHUserInterface.InstallRemoveEquipmentManualTaskInterface/InstallRemoveEquipmentTask"){
              if(orderType == "TIPO_ORDEM_MODIFICACAO"){
                      if((ord.ProductData.identificadorIPTV == null &&
                         ord.ProductData.identificadorHSI == null &&
                         ord.ProductData.identificadorOTT == null &&
                         ord.ProductData.identificadorVoIP == null &&
                         ord.ProductData.identificadorRFTV != null
                        )
                        && (ord.OriginalData[0].ProductData.identificadorIPTV != null ||
                            ord.OriginalData[0].ProductData.identificadorHSI != null ||
                            ord.OriginalData[0].ProductData.identificadorOTT != null ||
                            ord.OriginalData[0].ProductData.identificadorVoIP != null)){
                                return false;
                  }
              }
              return !FTTHOrder.isEquipmentLocked("ONT", "ONT", this.model.cwOrderId);
          }else if(actualTask == "FTTHUserInterface.ClickManualActivityInterface/BAOpenningOperation"){
              if(orderType == "TIPO_ORDEM_MODIFICACAO"){
                      if((ord.ProductData.identificadorIPTV == null &&
                         ord.ProductData.identificadorHSI == null &&
                         ord.ProductData.identificadorOTT == null &&
                         ord.ProductData.identificadorVoIP == null &&
                         ord.ProductData.identificadorRFTV != null
                        )
                        && (ord.OriginalData[0].ProductData.identificadorIPTV != null ||
                            ord.OriginalData[0].ProductData.identificadorHSI != null ||
                            ord.OriginalData[0].ProductData.identificadorOTT != null ||
                            ord.OriginalData[0].ProductData.identificadorVoIP != null)){
                                return false;

          }





          }

              return !FTTHOrder.isEquipmentLocked("ONT", "ONT", this.model.cwOrderId);
          } else if(actualTask == "FTTHUserInterface.SGFTManualActivityInterface/SGFTBAOpenning"){
              return !FTTHOrder.isEquipmentLocked("ONT", "ONT", this.model.cwOrderId);
          }

          return false;
        ]]></script>
      </method>
      <method name="onUpdateNomeCPE" type="uimthd">
        <script><![CDATA[
          var searchDoc = new Document("FTTHReportApplication:registerCPE");

          searchDoc.cwDocId = this.model.nomeCPE;

          var result = Finder.runSearch("FTTHOrder:nomeCPEFinder", searchDoc);

          this.model.codEquipamento = result[0].codigoMaterial;
        ]]></script>
      </method>
      <method name="onUpdateNomeCPEHGW" type="uimthd">
        <script><![CDATA[
          var searchDoc = new Document("FTTHReportApplication:registerCPE");

          searchDoc.cwDocId = this.model.nomeCPEHGW;

          var result = Finder.runSearch("FTTHOrder:nomeCPEFinder", searchDoc);

          this.model.codEquipamentoHGW = result[0].codigoMaterial;
        ]]></script>
      </method>
      <method name="permTrocaCPE" type="permMethod">
        <script><![CDATA[
          var userId = Global.getUserId();
          var searchUser = new Document('cwf_up:userProfileSearch');
          searchUser.userId = userId;
          var privileges = Finder.runSearch('FTTHOrder:UserPrivileges', searchUser);
          if(privileges && privileges.length > 0){
              for(var i= 0; privileges.length > i; i++){
                  if(privileges[i].privilegeCode == 'ChangeCPE'){
                      return false;
          }

          }

          }
          return true;
        ]]></script>
      </method>
      <method name="isNotNewEquip" type="permMethod">
        <script><![CDATA[
          var actualTask = UserProfile.getUserTask();
          if(actualTask == null){
              //No detalhamento o actualTask da ordem vem nulo.
              return false;
          }
          var ord = Order.getOrderById(this.model.cwOrderId);
          var orderType = ord.OrderHeader.tipoOS;

          if(orderType == "TIPO_ORDEM_INSTALACAO" || this.model.flagDadoOriginal == "N"){
              return false;
          }

          return true;
        ]]></script>
      </method>
      <method name="isHGWVisible" type="permMethod">
        <script><![CDATA[
          var newEquip;
          var oldEquip;
          newEquip = oldEquip = this.model;

          var searchDoc = new Document("FTTHReportApplication:registerCPE");

          if(!isNaN(parseInt(this.model.nomeCPE_ONT_Original))){
              searchDoc.clearData();
              searchDoc.cwDocId = this.model.nomeCPE_ONT_Original;
              oldEquip = Finder.runSearch("FTTHOrder:nomeCPEFinder", searchDoc)[0];
          }

          if(!isNaN(parseInt(this.model.nomeCPE))){
              searchDoc.clearData();
              searchDoc.cwDocId = this.model.nomeCPE;
              newEquip = Finder.runSearch("FTTHOrder:nomeCPEFinder", searchDoc)[0];
          }



          var isONT = (this.model.nomeCPE != "ONT Integrada" &&
                       this.model.nomeCPE_ONT_Original != "ONT Integrada" &&
                       newEquip.nomeCPE != "ONT Integrada" &&
                       oldEquip.nomeCPE != "ONT Integrada");

          return isONT;
        ]]></script>
      </method>
    </methodList>
  </UserInterface>
</document>