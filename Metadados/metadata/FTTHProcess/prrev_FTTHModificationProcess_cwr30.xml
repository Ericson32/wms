<?xml version="1.0" encoding="UTF-8" ?>
<process__revision name="FTTHProcess.FTTHModificationProcess_cwr30">
  <activity name="FTTHModificationProcessStart" type="seqActivity">
    <guid>{e74741b6-2982-4ac8-8a4d-cd6e76e74fd1}</guid>
    <label>FTTH Modification Process Start</label>
    <x>74.825584</x>
    <y>45.671288</y>
    <childList>
      <child name="ConsultOriginalFacilitySubprocess" type="subflowActivity">
        <element>prrev_FTTHProcess.ConsultOriginalFacilitySubprocess_cwr10</element>
        <guid>{ef03604f-8a81-4680-834b-e53ae6d2c113}</guid>
        <label>Consult Original Facility Subprocess</label>
        <x>78.34961</x>
        <y>171.10352</y>
        <methodList>
          <method name="cwOnProcActCond" type="action">
            <category>cond</category>
            <system>true</system>
            <script><![CDATA[
              var orderId = process.processOrder.OrderHeader.cwOrderId;
              var atividade = "%CONSULTAR%";
              var result = FTTHCommon.defineActivityNecessity(orderId, atividade);
              return (result);
            ]]></script>
          </method>
        </methodList>
      </child>
      <child name="bloquearFacilidades" type="seqActivity">
        <guid>{60293b8f-1bc4-44b4-959d-f8e2433d0959}</guid>
        <label>Bloquear Facilidades</label>
        <x>88.03418</x>
        <y>334.93008</y>
        <childList>
          <child name="bloquearFacilidades" type="subflowActivity">
            <element>prrev_FTTHProcess.SuspendFacilitySubprocess_cwr11</element>
            <guid>{0c75b7c1-d3be-4db5-bd26-33886686f48b}</guid>
            <label>Bloquear Facilidades</label>
            <x>79.68555</x>
            <y>467.41406</y>
            <methodList>
              <method name="cwOnProcActCond" type="action">
                <category>cond</category>
                <system>true</system>
                <script><![CDATA[
                  return FTTHOrderManagementInterface.bloqueiaFacilidadesFluxoScript(process, document);

                  //var orderId = process.processOrder.OrderHeader.cwOrderId;
                  //var atividade = "%BLOQUEAR%";
                  //var result = FTTHCommon.defineActivityNecessity(orderId, atividade);
                  //return (result);
                ]]></script>
              </method>
            </methodList>
          </child>
        </childList>
      </child>
      <child name="reassingFacility" type="seqActivity">
        <guid>{c08bcbbd-fcbf-457c-b87b-162e06ca4b49}</guid>
        <label>Reassing Facility</label>
        <x>77.75527</x>
        <y>617.9199</y>
        <childList>
          <child name="CheckNeedReassingFacility" type="switchActivity">
            <guid>{c4d74441-8cb3-4188-afc2-992c2062e48c}</guid>
            <label>Check Need Reassing Facility</label>
            <x>85.02051</x>
            <y>734.32227</y>
            <childList>
              <child name="need" type="caseActivity">
                <guid>{c6d4dd3a-b8c5-4ebc-adb2-f3115983ff84}</guid>
                <label>Need</label>
                <x>284.39307</x>
                <y>265.5656</y>
                <childList>
                  <child name="assignConsultFacility" type="seqActivity">
                    <guid>{6a0cbb01-3d8f-4b99-a8bd-71badca148e6}</guid>
                    <label>Assign Consult Facility</label>
                    <x>91.68351</x>
                    <y>898.1488</y>
                    <childList>
                      <child name="checkNeedAssignOrReassign" type="switchActivity">
                        <guid>{e753ec7e-8453-43d1-a88d-5b040d3be2cd}</guid>
                        <label>Check Need Assign or Reassign</label>
                        <x>143.69922</x>
                        <y>1015.93164</y>
                        <childList>
                          <child name="assign" type="caseActivity">
                            <guid>{93d4b775-01d1-4d42-a806-2fbfc3729050}</guid>
                            <label>Assign</label>
                            <x>141.19238</x>
                            <y>945.33826</y>
                            <childList>
                              <child name="assignFacilitySubprocess" type="subflowActivity">
                                <element>prrev_FTTHProcess.AssignFacilitySubprocess_cwr6</element>
                                <guid>{52d79e71-4207-481e-9fe5-569b43e91052}</guid>
                                <label>Assign Facility Subprocess</label>
                                <x>194.7168</x>
                                <y>1179.0869</y>
                              </child>
                            </childList>
                          </child>
                          <child name="reassign" type="caseActivity">
                            <guid>{57b67707-6c2e-4769-a137-327ad0cfdac1}</guid>
                            <label>Reassign</label>
                            <x>141.19238</x>
                            <y>945.33826</y>
                            <childList>
                              <child name="ReassignFacilitySubprocess" type="subflowActivity">
                                <element>prrev_FTTHProcess.ReassignFacilitySubprocess_cwr8</element>
                                <guid>{413780c7-8f62-485a-bff1-b0242df88b06}</guid>
                                <label>Reassign Facility Subprocess</label>
                                <x>79.34766</x>
                                <y>1179.0869</y>
                              </child>
                            </childList>
                            <methodList>
                              <method name="cwOnProcActCond" type="action">
                                <category>cond</category>
                                <system>true</system>
                                <script><![CDATA[
                                  var activityId = '%DESIGNAR_FACILIDADE%';
                                  var activity = FTTHCommon.getIdActivity(this.process.processOrder.id, activityId);

                                  if(activity == Global.getConfigVariable("REDESIGNAR_FACILIDADE"))
                                      return true;
                                  return false;
                                ]]></script>
                              </method>
                            </methodList>
                          </child>
                        </childList>
                      </child>
                    </childList>
                  </child>
                </childList>
                <methodList>
                  <method name="cwOnProcActCond" type="action">
                    <category>cond</category>
                    <system>true</system>
                    <script><![CDATA[
                      var orderId = process.processOrder.OrderHeader.cwOrderId;
                      var atividade = "%DESIGNAR%";
                      var result = FTTHCommon.defineActivityNecessity(orderId, atividade);
                      return (result);
                    ]]></script>
                  </method>
                </methodList>
              </child>
              <child name="notNeed" type="caseActivity">
                <guid>{b6873173-3fa3-4359-932f-778f1fa2fd70}</guid>
                <label>Not Need</label>
                <x>30.0</x>
                <y>1037.9834</y>
              </child>
            </childList>
          </child>
        </childList>
      </child>
      <child name="ConsultFacilitySubprocess" type="seqActivity">
        <guid>{62d4bac6-359f-454a-9f07-58e0b1dd0606}</guid>
        <label>Consult Facility Subprocess</label>
        <x>101.053406</x>
        <y>1357.9135</y>
        <childList>
          <child name="ConsultFacilitySubprocess2" type="subflowActivity">
            <element>prrev_FTTHProcess.ConsultNewFacilitySubprocess_cwr10</element>
            <guid>{23a2bded-5ee1-4cf9-94a1-c6182b211797}</guid>
            <label>Consult Facility Subprocess</label>
            <x>150.06201</x>
            <y>1490.3975</y>
            <methodList>
              <method name="cwOnProcActCond" type="action">
                <category>cond</category>
                <system>true</system>
                <script><![CDATA[
                  var orderId = process.processOrder.OrderHeader.cwOrderId;
                  var atividade = "%CONSULTAR%NOVA";
                  var result = FTTHCommon.defineActivityNecessity(orderId, atividade);

                  if (!result) {
                    FTTHInventoryInterface.copyConsultLogical2Original(process.processOrder);
                    FTTHInventoryInterface.copyConsultLogicalOriginal(process.processOrder);
                    FTTHInventoryInterface.copyConsultPhysicalOriginal(process.processOrder);
                  }

                  return (result);
                ]]></script>
              </method>
            </methodList>
          </child>
        </childList>
      </child>
      <child name="ReconfigureFacilitySequence" type="seqActivity">
        <guid>{410717ea-b0f1-4875-809e-acd063316012}</guid>
        <label>Reconfigure Facility Sequence</label>
        <x>147.85986</x>
        <y>1646.8734</y>
        <childList>
          <child name="CheckNeedToReconfigureFacility" type="switchActivity">
            <guid>{99b51df7-7adf-4c37-a87f-e39ac05b9200}</guid>
            <label>Check Need To Reconfigure Facility</label>
            <x>149.39404</x>
            <y>1764.6562</y>
            <childList>
              <child name="Need" type="caseActivity">
                <guid>{18d2b971-5625-4d0d-91d9-8f32ced9fac1}</guid>
                <label>Need</label>
                <x>81.80791</x>
                <y>1442.1111</y>
                <childList>
                  <child name="ReconfigureFacilitySequence" type="seqActivity">
                    <guid>{7ec198f5-2056-4ae0-8635-970bcdafbecd}</guid>
                    <label>Reconfigure Facility Sequence</label>
                    <x>202.70996</x>
                    <y>1928.4828</y>
                    <childList>
                      <child name="ReconfigureFacilitySubprocess" type="subflowActivity">
                        <element>prrev_FTTHProcess.ReconfigureFacilitySubprocess_cwr11</element>
                        <guid>{be0848a5-ea9b-491d-9a84-52741a71f9c9}</guid>
                        <label>Reconfigure Facility Subprocess</label>
                        <x>204.24414</x>
                        <y>2060.9668</y>
                      </child>
                    </childList>
                  </child>
                </childList>
                <methodList>
                  <method name="cwOnProcActCond" type="action">
                    <category>cond</category>
                    <system>true</system>
                    <script><![CDATA[
                      var orderId = process.processOrder.OrderHeader.cwOrderId;
                      var atividade = "RECONFIGURAR_%";
                      var result = FTTHCommon.defineActivityNecessity(orderId, atividade);
                      return (result);
                    ]]></script>
                  </method>
                </methodList>
              </child>
              <child name="NotNeed" type="caseActivity">
                <guid>{5a923a52-610b-4127-851a-ac5ab5072299}</guid>
                <label>Not Need</label>
                <x>105.54883</x>
                <y>2075.668</y>
              </child>
            </childList>
          </child>
        </childList>
      </child>
      <child name="UpdateFrachise" type="seqActivity">
        <guid>{03225418-7cdd-470d-9c5c-6a023e25447c}</guid>
        <label>Update Frachise</label>
        <x>203.0976</x>
        <y>2221.0923</y>
        <childList>
          <child name="UpdateFranchiseSubprocess" type="subflowActivity">
            <element>prrev_FTTHProcess.UpdateFranchiseSubprocess_cwr5</element>
            <guid>{e81a2574-a642-435d-ab3e-92c046604da4}</guid>
            <label>Update Franchise Subprocess</label>
            <x>283.87323</x>
            <y>2324.7634</y>
            <methodList>
              <method name="cwOnProcActCond" type="action">
                <category>cond</category>
                <system>true</system>
                <script><![CDATA[
                  var orderId = process.processOrder.OrderHeader.cwOrderId;
                  var atividade = "ALTERAR_FRANQUIA_IN";
                  var result = FTTHCommon.defineActivityNecessity(orderId, atividade);
                  return result;
                ]]></script>
              </method>
            </methodList>
          </child>
          <child name="MoreFranchiseToUpdate" type="switchActivity">
            <guid>{f5844894-521b-433e-b0ab-6dbe014b0381}</guid>
            <label>More Franchise To Update?</label>
            <x>382.89667</x>
            <y>30.0</y>
            <childList>
              <child name="yes" type="caseActivity">
                <guid>{1aa0730a-791b-416c-9a53-8ab5e89b099c}</guid>
                <label>Yes</label>
                <x>41.483593</x>
                <y>230.0</y>
                <childList>
                  <child name="ResendToUpdate" type="repeatActivity">
                    <element>prrev_FTTHProcess.FTTHModificationProcess_cwr30/seqActivity_FTTHModificationProcessStart/seqActivity_UpdateFrachise</element>
                    <guid>{aaee02e0-0637-4886-a211-f1877fd6c0fd}</guid>
                    <label>Resend To Update</label>
                    <x>318.10156</x>
                    <y>1186.4375</y>
                  </child>
                </childList>
                <methodList>
                  <method name="cwOnProcActCond" type="action">
                    <category>cond</category>
                    <system>true</system>
                    <script><![CDATA[
                      var orderId = process.processOrder.OrderHeader.cwOrderId;
                      var atividade = "ALTERAR_FRANQUIA_IN";
                      var resultNecessity = FTTHCommon.defineActivityNecessity(orderId, atividade);
                      if(resultNecessity){
                          var result = FTTHActivationInterface.checkFranchisePlanResendNecessity(process.processOrder.OrderHeader.cwOrderId, 'modificar', 'N');
                          if (result == true){
                              FTTHCommon.setStatusActivity(this.process.processOrder.id, "ALTERAR_FRANQUIA_IN", Global.getConfigVariable("ACTIVITY_STATUS_NEW"));
                          }

                          return result;
                      }
                      return resultNecessity;
                    ]]></script>
                  </method>
                </methodList>
              </child>
              <child name="no" type="caseActivity">
                <guid>{7fc70aec-20bd-421f-a5d4-94283fea2868}</guid>
                <label>No</label>
                <x>490.49854</x>
                <y>193.15527</y>
              </child>
            </childList>
          </child>
        </childList>
      </child>
      <child name="DesconfigureFacilityChangeAddressSubprocessStart" type="seqActivity">
        <guid>{31fed749-ed68-43a8-ba58-e22126fe7e3b}</guid>
        <label>Desconfigure Facility Change Address Subprocess Start</label>
        <x>473.67432</x>
        <y>329.04962</y>
        <childList>
          <child name="CheckNeedDesconfigureFacility" type="switchActivity">
            <guid>{181f306e-0728-430e-9770-65f96a515803}</guid>
            <label>Check Need Desconfigure Facility</label>
            <x>471.146</x>
            <y>452.7129</y>
            <childList>
              <child name="Need" type="caseActivity">
                <guid>{33a565ef-7901-41a7-aff1-c9ef237d7dd0}</guid>
                <label>Need</label>
                <x>28.8666</x>
                <y>450.86444</y>
                <childList>
                  <child name="DesconfigureFacilitySubprocess" type="subflowActivity">
                    <element>prrev_FTTHProcess.DesconfigureFacilitySubprocess_cwr13</element>
                    <guid>{1797654e-a962-48c1-b2db-9558d4a7407c}</guid>
                    <label>Desconfigure Facility Subprocess</label>
                    <x>527.4961</x>
                    <y>600.86816</y>
                  </child>
                </childList>
                <methodList>
                  <method name="cwOnProcActCond" type="action">
                    <category>cond</category>
                    <system>true</system>
                    <script><![CDATA[
                      var orderId = process.processOrder.OrderHeader.cwOrderId;
                      var atividade = "DESCONFIGURAR_%";


                      //Excepção efetuada para a troca de endereço
                      //Apenas na mudança de endereço é executada a desconfiguração de facilidades, antes da configuração de facilidades
                      //Validação também efetuado no need do DesconfigureFacilitySubprocess para que não seja executada duas vezes
                      var ops = new Document('FTTHOrderManagementInterface:OrderParametersSearch');
                      ops.cwOrderId = orderId;

                      var orderRequest = Finder.runSearch('FTTHOrderManagementInterface:OrderRequestFinder', ops);
                      var isTipoModEndereco = false;

                      if (orderRequest.size > 0) {
                          for (var i = 0; i < orderRequest.size; i++) {
                              if(orderRequest[i].nomeSolicitacao == 'Mudança de Endereço'){
                                  isTipoModEndereco = true;
                                  break;
                              }
                          }
                      }


                      var result = FTTHCommon.defineActivityNecessity(orderId, atividade);
                      return (result && isTipoModEndereco);
                    ]]></script>
                  </method>
                </methodList>
              </child>
              <child name="NotNeed" type="caseActivity">
                <guid>{cab3308a-294e-4b84-8db6-b6d40f3329bf}</guid>
                <label>Not Need</label>
                <x>424.80078</x>
                <y>615.56934</y>
              </child>
            </childList>
          </child>
        </childList>
      </child>
      <child name="ConfigureFacilitySubprocessStart" type="seqActivity">
        <guid>{5fbf9f71-08fb-4556-bad4-d1f0553ea2d4}</guid>
        <label>Configure Facility Subprocess Start</label>
        <x>489.02286</x>
        <y>757.3441</y>
        <childList>
          <child name="CheckNeedConfigureFacility" type="switchActivity">
            <guid>{caf16f97-7469-47b6-b0ec-60e665e9c5f0}</guid>
            <label>Check Need Configure Facility</label>
            <x>503.48663</x>
            <y>875.12695</y>
            <childList>
              <child name="Need" type="caseActivity">
                <guid>{41266306-09f7-462b-8494-41988db5e2e6}</guid>
                <label>Need</label>
                <x>78.87978</x>
                <y>818.41406</y>
                <childList>
                  <child name="ConfigureFacilitySubprocess" type="subflowActivity">
                    <element>prrev_FTTHProcess.ConfigureFacilitySubprocess_cwr9</element>
                    <guid>{867fc1c4-db3f-4ce8-920a-b3f81fdfda5d}</guid>
                    <label>Configure Facility Subprocess</label>
                    <x>552.3338</x>
                    <y>1023.2822</y>
                  </child>
                </childList>
                <methodList>
                  <method name="cwOnProcActCond" type="action">
                    <category>cond</category>
                    <system>true</system>
                    <script><![CDATA[
                      var orderId = process.processOrder.OrderHeader.cwOrderId;
                      var atividade = "CONFIGURAR_%";
                      var result = FTTHCommon.defineActivityNecessity(orderId, atividade);
                      return (result);
                    ]]></script>
                  </method>
                </methodList>
              </child>
              <child name="NotNeed" type="caseActivity">
                <guid>{6c6874ef-d129-4866-bd1b-2fa21b04fe79}</guid>
                <label>Not Need</label>
                <x>449.6385</x>
                <y>1037.9834</y>
              </child>
            </childList>
          </child>
        </childList>
      </child>
      <child name="ConfigureDigitalServiceSubprocess" type="subflowActivity">
        <element>prrev_FTTHProcess.ConfigureDigitalServiceSubprocess_cwr9</element>
        <guid>{1d32c67b-55cf-48a9-8f53-7723d5a7f01e}</guid>
        <label>Configure Digital Service Subprocess</label>
        <x>552.33374</x>
        <y>1171.7363</y>
        <methodList>
          <method name="cwOnProcActCond" type="action">
            <category>cond</category>
            <system>true</system>
            <script><![CDATA[
              var orderId = process.processOrder.OrderHeader.cwOrderId;
              var atividade = "CONFIGURAR_SERVICO_DIGITAL";
              var result = FTTHCommon.defineActivityNecessity(orderId, atividade);
              return result;
            ]]></script>
          </method>
        </methodList>
      </child>
      <child name="InsertFrachise" type="seqActivity">
        <guid>{5ad87a35-3de3-486e-b776-296e00f462e9}</guid>
        <label>Insert Frachise</label>
        <x>584.9591</x>
        <y>1359.294</y>
        <childList>
          <child name="InsertFranchiseSubprocess" type="subflowActivity">
            <element>prrev_FTTHProcess.InsertFranchiseSubprocess_cwr5</element>
            <guid>{62d548db-59dc-4eb5-9617-df723326d283}</guid>
            <label>Insert Franchise Subprocess</label>
            <x>606.0184</x>
            <y>1490.3975</y>
            <methodList>
              <method name="cwOnProcActCond" type="action">
                <category>cond</category>
                <system>true</system>
                <script><![CDATA[
                  var orderId = process.processOrder.OrderHeader.cwOrderId;
                  var atividade = "INSERIR_FRANQUIA_IN";
                  var result = FTTHCommon.defineActivityNecessity(orderId, atividade);
                  return result;
                ]]></script>
              </method>
            </methodList>
          </child>
          <child name="MoreFranchiseToInsert" type="switchActivity">
            <guid>{f5844894-521b-433e-b0ab-6dbe014b0381}</guid>
            <label>More Franchise To Insert?</label>
            <x>665.86115</x>
            <y>30.0</y>
            <childList>
              <child name="yes" type="caseActivity">
                <guid>{1aa0730a-791b-416c-9a53-8ab5e89b099c}</guid>
                <label>Yes</label>
                <x>41.483593</x>
                <y>230.0</y>
                <childList>
                  <child name="ResendToInsert" type="repeatActivity">
                    <element>prrev_FTTHProcess.FTTHModificationProcess_cwr30/seqActivity_FTTHModificationProcessStart/seqActivity_InsertFrachise</element>
                    <guid>{aaee02e0-0637-4886-a211-f1877fd6c0fd}</guid>
                    <label>Resend To Insert</label>
                    <x>600.1034</x>
                    <y>749.02344</y>
                  </child>
                </childList>
                <methodList>
                  <method name="cwOnProcActCond" type="action">
                    <category>cond</category>
                    <system>true</system>
                    <script><![CDATA[
                      var orderId = process.processOrder.OrderHeader.cwOrderId;
                      var atividade = "INSERIR_FRANQUIA_IN";
                      var resultNecessity = FTTHCommon.defineActivityNecessity(orderId, atividade);
                      if(resultNecessity){
                          var result = FTTHActivationInterface.checkFranchisePlanResendNecessity(process.processOrder.OrderHeader.cwOrderId, 'adicionar', 'N');

                          if (result == true){
                              FTTHCommon.setStatusActivity(this.process.processOrder.id, "INSERIR_FRANQUIA_IN", Global.getConfigVariable("ACTIVITY_STATUS_NEW"));
                          }
                          return result;
                      }
                      return resultNecessity;
                    ]]></script>
                  </method>
                </methodList>
              </child>
              <child name="no" type="caseActivity">
                <guid>{7fc70aec-20bd-421f-a5d4-94283fea2868}</guid>
                <label>No</label>
                <x>764.1406</x>
                <y>193.15527</y>
              </child>
            </childList>
          </child>
        </childList>
      </child>
      <child name="jumperSubprocess" type="seqActivity">
        <guid>{13ae86f5-6f64-426d-926c-7b0ffec3acf8}</guid>
        <label>Install Jumper Subprocess</label>
        <x>754.2625</x>
        <y>334.93005</y>
        <childList>
          <child name="checkNeedInstallJumper" type="switchActivity">
            <guid>{bf68e07c-fe94-4e33-b958-2ab4416cf8ee}</guid>
            <label>Check Need Install Jumper</label>
            <x>760.1338</x>
            <y>452.7129</y>
            <childList>
              <child name="need" type="caseActivity">
                <guid>{9a4fa0f9-61f5-4599-98b3-0488323707a2}</guid>
                <label>Need</label>
                <x>362.3684</x>
                <y>1903.6884</y>
                <childList>
                  <child name="InstallJumperSubprocess" type="subflowActivity">
                    <element>prrev_FTTHProcess.InstallJumperSubprocess_cwr5</element>
                    <guid>{f740b14a-f8e0-48df-8899-fd30c52bcfd9}</guid>
                    <label>Install Jumper Subprocess</label>
                    <x>802.97217</x>
                    <y>600.86816</y>
                    <methodList>
                      <method name="cwOnProcActCond" type="action">
                        <category>cond</category>
                        <description><![CDATA[
                          <p style="margin-top: 0">
                            aaa
                          </p>
                        ]]></description>
                        <system>true</system>
                        <script><![CDATA[
                          var activityId;
                          var orderId = process.processOrder.OrderHeader.cwOrderId;
                          activityId = Global.getConfigVariable("REALIZAR_JUMPER");
                          var result = FTTHCommon.getStatusActivity(orderId, activityId);

                          if(result == Global.getConfigVariable("ACTIVITY_RETURN_SUCCESS"))
                              return false;
                          return true;
                        ]]></script>
                      </method>
                    </methodList>
                  </child>
                </childList>
                <methodList>
                  <method name="cwOnProcActCond" type="action">
                    <category>cond</category>
                    <system>true</system>
                    <script><![CDATA[
                      var orderId = process.processOrder.OrderHeader.cwOrderId;
                      var atividade = "REALIZAR_JUMPER";
                      var result = FTTHCommon.defineActivityNecessity(orderId, atividade);
                      return (result);
                    ]]></script>
                  </method>
                </methodList>
              </child>
              <child name="notNeed" type="caseActivity">
                <guid>{b68197bd-73f4-4cb9-a661-8419f9fe5d1b}</guid>
                <label>Not Need</label>
                <x>700.27686</x>
                <y>615.56934</y>
              </child>
            </childList>
          </child>
        </childList>
      </child>
      <child name="installEquipmentSequence" type="seqActivity">
        <guid>{3952be68-db23-4d44-ae66-75a2359ebdaf}</guid>
        <label>Install Equipment Sequence</label>
        <x>759.6958</x>
        <y>757.3441</y>
        <childList>
          <child name="checkNeedInstallEquipment" type="switchActivity">
            <guid>{bf68e07c-fe94-4e33-b958-2ab4416cf8ee}</guid>
            <label>Check Need Install Equipment</label>
            <x>740.2093</x>
            <y>875.12695</y>
            <childList>
              <child name="need" type="caseActivity">
                <guid>{9a4fa0f9-61f5-4599-98b3-0488323707a2}</guid>
                <label>Need</label>
                <x>866.86725</x>
                <y>1015.93164</y>
                <childList>
                  <child name="startEquipmentInstallation" type="seqActivity">
                    <guid>{a4bb90d5-3cb0-47b3-8b98-9b96447315ed}</guid>
                    <label>Start Equipment Installation</label>
                    <x>791.31915</x>
                    <y>1038.9535</y>
                    <childList>
                      <child name="configureIPTVIESFProfile" type="subflowActivity">
                        <element>prrev_FTTHProcess.ConfigureIPTVIESFProfile_cwr5</element>
                        <guid>{49aa2c12-4056-45a7-8d41-68eb15893db7}</guid>
                        <label>Configure IPTV IESF Profile</label>
                        <x>793.39825</x>
                        <y>1179.0869</y>
                        <methodList>
                          <method name="cwOnProcActCond" type="action">
                            <category>cond</category>
                            <system>true</system>
                            <script><![CDATA[
                              var originalData = false;
                              var isDVR = FTTHCommon.verifyEquipmentInstallRemove(process.processOrder, originalData);

                              var orderId = process.processOrder.OrderHeader.cwOrderId;
                              var atividade =  Global.getConfigVariable("CONFIGURAR_PERFIL_CLIENTE_IPTV_IESF");
                              var result = FTTHCommon.defineActivityNecessity(orderId, atividade);

                              return (result && isDVR);
                            ]]></script>
                          </method>
                        </methodList>
                      </child>
                      <child name="InstallRemoveEquipmentSubprocess" type="subflowActivity">
                        <element>prrev_FTTHProcess.InstallRemoveClientEquipmentSubprocessV1_1_cwr9</element>
                        <guid>{974d57ce-8bee-47e2-aa44-6fe21566a142}</guid>
                        <label>Install Remove Equipment Subprocess V1.1</label>
                        <x>756.08203</x>
                        <y>1327.541</y>
                        <methodList>
                          <method name="cwOnProcActCond" type="action">
                            <category>cond</category>
                            <description><![CDATA[
                              <p style="margin-top: 0">
                                qer
                              </p>
                            ]]></description>
                            <system>true</system>
                            <script><![CDATA[
                              var activityId;
                              var orderId = process.processOrder.OrderHeader.cwOrderId;
                              activityId = Global.getConfigVariable("INSTALAR_EQUIPAMENTO_CLIENTE");
                              var result = FTTHCommon.getStatusActivity(orderId, activityId);

                              if(result == Global.getConfigVariable("ACTIVITY_RETURN_SUCCESS"))
                                  return false;
                              return true;
                            ]]></script>
                          </method>
                        </methodList>
                      </child>
                    </childList>
                  </child>
                </childList>
                <methodList>
                  <method name="cwOnProcActCond" type="action">
                    <category>cond</category>
                    <system>true</system>
                    <script><![CDATA[
                      var orderId = process.processOrder.OrderHeader.cwOrderId;
                      var atividade = Global.getConfigVariable("INSTALAR_EQUIPAMENTO_CLIENTE");
                      var result = FTTHCommon.defineActivityNecessity(orderId, atividade);

                      return (result);
                    ]]></script>
                  </method>
                </methodList>
              </child>
              <child name="notNeed" type="caseActivity">
                <guid>{b68197bd-73f4-4cb9-a661-8419f9fe5d1b}</guid>
                <label>Not Need</label>
                <x>694.70294</x>
                <y>1193.7881</y>
              </child>
            </childList>
          </child>
        </childList>
      </child>
      <child name="removeEquipmentSubprocess" type="seqActivity">
        <guid>{186f6e6c-7f4a-426c-8c2d-81f6b02eaf02}</guid>
        <label>Remove Equipment Sequence</label>
        <x>729.90857</x>
        <y>1503.1285</y>
        <childList>
          <child name="checkNeedRemoveEquipment" type="switchActivity">
            <guid>{bf68e07c-fe94-4e33-b958-2ab4416cf8ee}</guid>
            <label>Check Need Remove Equipment</label>
            <x>733.42883</x>
            <y>1623.8516</y>
            <childList>
              <child name="need" type="caseActivity">
                <guid>{9a4fa0f9-61f5-4599-98b3-0488323707a2}</guid>
                <label>Need</label>
                <x>881.581</x>
                <y>185.80469</y>
                <childList>
                  <child name="startEquipmentRemove" type="seqActivity">
                    <guid>{22005c9e-1ee5-4ad8-bc7a-6c8055a71821}</guid>
                    <label>startEquipmentRemove</label>
                    <x>768.8004</x>
                    <y>1789.0586</y>
                    <childList>
                      <child name="configureIPTVIESFProfile" type="subflowActivity">
                        <element>prrev_FTTHProcess.ConfigureIPTVIESFProfile_cwr5</element>
                        <guid>{a69c3c2f-7e10-49e8-88fc-2c6e1fdb475a}</guid>
                        <label>Configure IPTV IESF Profile</label>
                        <x>786.6178</x>
                        <y>1912.8115</y>
                        <methodList>
                          <method name="cwOnProcActCond" type="action">
                            <category>cond</category>
                            <system>true</system>
                            <script><![CDATA[
                              var originalData = true;
                              var isDVR = FTTHCommon.verifyEquipmentInstallRemove(process.processOrder, originalData);

                              var orderId = process.processOrder.OrderHeader.cwOrderId;
                              var atividade =  Global.getConfigVariable("CONFIGURAR_PERFIL_CLIENTE_IPTV_IESF");
                              var result = FTTHCommon.defineActivityNecessity(orderId, atividade);

                              var statusAtividade = FTTHCommon.getStatusActivity(orderId, atividade);

                              //verifica se a atividade de configurar cliente não foi executado, caso tenha sido,
                              //não será executado novamente
                              return (result && isDVR && (statusAtividade == Global.getConfigVariable("ACTIVITY_STATUS_NEW")));
                            ]]></script>
                          </method>
                        </methodList>
                      </child>
                      <child name="InstallRemoveEquipmentSubprocess" type="subflowActivity">
                        <element>prrev_FTTHProcess.InstallRemoveClientEquipmentSubprocessV1_1_cwr9</element>
                        <guid>{2a1079b1-cd9b-405a-a73e-0b45d5debc08}</guid>
                        <label>Install Remove Equipment Subprocess V1.1</label>
                        <x>783.2721</x>
                        <y>2046.2656</y>
                        <methodList>
                          <method name="cwOnProcActCond" type="action">
                            <category>cond</category>
                            <description><![CDATA[
                              <p style="margin-top: 0">
                                aaaaa
                              </p>
                            ]]></description>
                            <system>true</system>
                            <script><![CDATA[
                              var activityId;
                              var orderId = process.processOrder.OrderHeader.cwOrderId;

                              activityId = Global.getConfigVariable("RETIRAR_EQUIPAMENTO_CLIENTE");

                              var resultActivityNecessity =  FTTHCommon.defineActivityNecessity(orderId, activityId);

                              if (resultActivityNecessity == false){

                                  activityId = Global.getConfigVariable("ALTERAR_EQUIPAMENTO_CLIENTE");
                              }

                              var result = FTTHCommon.getStatusActivity(orderId, activityId);

                              if(result == Global.getConfigVariable("ACTIVITY_RETURN_SUCCESS"))
                                  return false;
                              return true;
                            ]]></script>
                          </method>
                        </methodList>
                      </child>
                    </childList>
                  </child>
                </childList>
                <methodList>
                  <method name="cwOnProcActCond" type="action">
                    <category>cond</category>
                    <system>true</system>
                    <script><![CDATA[
                      var orderId = process.processOrder.OrderHeader.cwOrderId;
                      var atividade = "RETIRAR_EQUIPAMENTO_CLIENTE";
                      var result = FTTHCommon.defineActivityNecessity(orderId, atividade);

                      if (result == false){
                          atividade = Global.getConfigVariable("ALTERAR_EQUIPAMENTO_CLIENTE");
                          var result = FTTHCommon.defineActivityNecessity(orderId, atividade);
                      }
                      return (result);
                    ]]></script>
                  </method>
                </methodList>
              </child>
              <child name="notNeed" type="caseActivity">
                <guid>{b68197bd-73f4-4cb9-a661-8419f9fe5d1b}</guid>
                <label>Not Need</label>
                <x>687.9225</x>
                <y>1927.5127</y>
              </child>
            </childList>
          </child>
        </childList>
      </child>
      <child name="DesconfigureFacilitySubprocessStart" type="seqActivity">
        <guid>{f3b36863-110e-47b6-a9b5-51b496f82ffd}</guid>
        <label>Desconfigure Facility Subprocess Start</label>
        <x>729.2954</x>
        <y>2216.7715</y>
        <childList>
          <child name="CheckNeedDesconfigureFacility" type="switchActivity">
            <guid>{181f306e-0728-430e-9770-65f96a515803}</guid>
            <label>Check Need Desconfigure Facility</label>
            <x>726.76086</x>
            <y>2317.4128</y>
            <childList>
              <child name="Need" type="caseActivity">
                <guid>{33a565ef-7901-41a7-aff1-c9ef237d7dd0}</guid>
                <label>Need</label>
                <x>28.8666</x>
                <y>450.86444</y>
                <childList>
                  <child name="DesconfigureFacilitySubprocess" type="subflowActivity">
                    <element>prrev_FTTHProcess.DesconfigureFacilitySubprocess_cwr13</element>
                    <guid>{1797654e-a962-48c1-b2db-9558d4a7407c}</guid>
                    <label>Desconfigure Facility Subprocess</label>
                    <x>783.11096</x>
                    <y>2465.568</y>
                  </child>
                </childList>
                <methodList>
                  <method name="cwOnProcActCond" type="action">
                    <category>cond</category>
                    <system>true</system>
                    <script><![CDATA[
                      var orderId = process.processOrder.OrderHeader.cwOrderId;
                      var atividade = "DESCONFIGURAR_%";


                      //Excepção efetuada para a troca de endereço
                      //Na mudança de endereço é executada a desconfiguração de facilidades, antes da configuração de facilidades
                      //Neste caso se for mudança de endereço não deverá ser executada, para que não seja executada duas vezes
                      var ops = new Document('FTTHOrderManagementInterface:OrderParametersSearch');
                      ops.cwOrderId = orderId;

                      var orderRequest = Finder.runSearch('FTTHOrderManagementInterface:OrderRequestFinder', ops);
                      var isTipoModEndereco = false;

                      if (orderRequest.size > 0) {
                          for (var i = 0; i < orderRequest.size; i++) {
                              if(orderRequest[i].nomeSolicitacao == 'Mudança de Endereço'){
                                  isTipoModEndereco = true;
                                  break;
                              }
                          }
                      }


                      var result = FTTHCommon.defineActivityNecessity(orderId, atividade);
                      return (result && !isTipoModEndereco);
                    ]]></script>
                  </method>
                </methodList>
              </child>
              <child name="NotNeed" type="caseActivity">
                <guid>{cab3308a-294e-4b84-8db6-b6d40f3329bf}</guid>
                <label>Not Need</label>
                <x>680.41565</x>
                <y>2480.2693</y>
              </child>
            </childList>
          </child>
        </childList>
      </child>
      <child name="DeleteFrachise" type="seqActivity">
        <guid>{254f7423-3b33-44eb-bcd0-4a4f200dfba2}</guid>
        <label>Delete Frachise</label>
        <x>778.72845</x>
        <y>2631.074</y>
        <childList>
          <child name="DeleteFranchiseSubprocess" type="subflowActivity">
            <element>prrev_FTTHProcess.DeleteFranchiseSubprocess_cwr5</element>
            <guid>{17817ff4-6c58-45ef-8258-94ca9046f152}</guid>
            <label>Delete Franchise Subprocess</label>
            <x>850.9688</x>
            <y>2747.4763</y>
            <methodList>
              <method name="cwOnProcActCond" type="action">
                <category>cond</category>
                <system>true</system>
                <script><![CDATA[
                  var orderId = process.processOrder.OrderHeader.cwOrderId;
                  var atividade = "REMOVER_FRANQUIA_IN";
                  var result = FTTHCommon.defineActivityNecessity(orderId, atividade);
                  return result;
                ]]></script>
              </method>
            </methodList>
          </child>
          <child name="MoreFranchiseToDelete" type="switchActivity">
            <guid>{f5844894-521b-433e-b0ab-6dbe014b0381}</guid>
            <label>More Franchise To Delete?</label>
            <x>918.51807</x>
            <y>30.0</y>
            <childList>
              <child name="yes" type="caseActivity">
                <guid>{1aa0730a-791b-416c-9a53-8ab5e89b099c}</guid>
                <label>Yes</label>
                <x>41.483593</x>
                <y>230.0</y>
                <childList>
                  <child name="ResendToDelete" type="repeatActivity">
                    <element>prrev_FTTHProcess.FTTHModificationProcess_cwr30/seqActivity_FTTHModificationProcessStart/seqActivity_DeleteFrachise</element>
                    <guid>{aaee02e0-0637-4886-a211-f1877fd6c0fd}</guid>
                    <label>Resend To Delete</label>
                    <x>875.4512</x>
                    <y>1349.5928</y>
                  </child>
                </childList>
                <methodList>
                  <method name="cwOnProcActCond" type="action">
                    <category>cond</category>
                    <system>true</system>
                    <script><![CDATA[
                      var orderId = process.processOrder.OrderHeader.cwOrderId;
                      var atividade = "REMOVER_FRANQUIA_IN";
                      var resultNecessity = FTTHCommon.defineActivityNecessity(orderId, atividade);
                      if(resultNecessity){
                          var result = FTTHActivationInterface.checkFranchisePlanResendNecessity(process.processOrder.OrderHeader.cwOrderId, 'remover', 'O');
                          if (result == true){
                              FTTHCommon.setStatusActivity(this.process.processOrder.id, "REMOVER_FRANQUIA_IN", Global.getConfigVariable("ACTIVITY_STATUS_NEW"));
                          }

                          return result;
                      }
                      return resultNecessity;
                    ]]></script>
                  </method>
                </methodList>
              </child>
              <child name="no" type="caseActivity">
                <guid>{7fc70aec-20bd-421f-a5d4-94283fea2868}</guid>
                <label>No</label>
                <x>1005.6012</x>
                <y>193.15527</y>
              </child>
            </childList>
          </child>
        </childList>
      </child>
      <child name="ConfigureServiceSuspendSubprocess" type="subflowActivity">
        <element>prrev_FTTHProcess.SuspendVoIPServicePlatformsSubprocess_cwr4</element>
        <guid>{88ca8ce1-fad1-4877-93e5-e3003b8a3816}</guid>
        <label>Configure Service Suspend Subprocess</label>
        <x>989.9166</x>
        <y>311.9082</y>
        <methodList>
          <method name="cwOnProcActCond" type="action">
            <category>cond</category>
            <system>true</system>
            <script><![CDATA[
              var orderId = process.processOrder.OrderHeader.cwOrderId;
              var activityId = "%BLOQUEAR_VOIP_%_SERVICO";
              var result = FTTHCommon.defineActivityNecessity(orderId, activityId);
              return (result);
            ]]></script>
          </method>
        </methodList>
      </child>
      <child name="DissociateSTBSubprocess" type="seqActivity">
        <guid>{40ebacd3-ab6a-44e2-be96-81e82b43be1f}</guid>
        <label>Dissociate STB Subprocess</label>
        <x>992.791</x>
        <y>475.73477</y>
        <childList>
          <child name="CheckNeedDissociateSTB" type="switchActivity">
            <guid>{f8f98c24-8013-4f62-bbfd-9aafe730994f}</guid>
            <label>Check Need Dissociate STB</label>
            <x>993.92444</x>
            <y>593.5176</y>
            <childList>
              <child name="Need" type="caseActivity">
                <guid>{61220edc-8032-4862-8625-5191eacd6e0d}</guid>
                <label>Need</label>
                <x>162.63959</x>
                <y>2611.8474</y>
                <childList>
                  <child name="dissociateSTB" type="seqActivity">
                    <guid>{a5a2e1ee-37c8-46fc-a206-5d403c0ac4ff}</guid>
                    <label>Dissociate STB</label>
                    <x>1033.384</x>
                    <y>758.7246</y>
                    <childList>
                      <child name="dissociateSTBSubprocess" type="subflowActivity">
                        <element>prrev_FTTHProcess.DissociateSTBSubprocess_cwr6</element>
                        <guid>{d6f1a1bb-5043-423a-ab80-aafd6373a139}</guid>
                        <label>Dissociate STB Subprocess</label>
                        <x>1060.3519</x>
                        <y>882.47754</y>
                      </child>
                      <child name="checkNeedDissociateSTB" type="switchActivity">
                        <guid>{2a3be5f2-4fa2-48f7-bf11-22c9f0b617af}</guid>
                        <label>Check Need Dissociate STB</label>
                        <x>1062.3558</x>
                        <y>1015.93164</y>
                        <childList>
                          <child name="need" type="caseActivity">
                            <guid>{996e89d3-868d-41e5-9e95-b5efa0828f73}</guid>
                            <label>Need</label>
                            <x>157.9102</x>
                            <y>2970.7556</y>
                            <childList>
                              <child name="resendToDissociateSTB" type="repeatActivity">
                                <element>prrev_FTTHProcess.FTTHModificationProcess_cwr30/seqActivity_FTTHModificationProcessStart/seqActivity_DissociateSTBSubprocess/switchActivity_CheckNeedDissociateSTB/caseActivity_Need/seqActivity_dissociateSTB</element>
                                <guid>{a41091d9-4a4b-4284-9f6b-9dc01c09f4e8}</guid>
                                <label>Resend To Dissociate STB</label>
                                <x>995.5036</x>
                                <y>1179.0869</y>
                              </child>
                            </childList>
                            <methodList>
                              <method name="cwOnProcActCond" type="action">
                                <category>cond</category>
                                <system>true</system>
                                <script><![CDATA[
                                  if(process.processOrder.OriginalData[0].EquipmentData[0].AddPointsEquipmentData){
                                      var countIPTVPointsOriginal = process.processOrder.OriginalData[0].EquipmentData[0].AddPointsEquipmentData.length;
                                      var i = process.processOrder.OrderHeader.countIPTV + 1;

                                     if( i < countIPTVPointsOriginal) {
                                         process.processOrder.OrderHeader.countIPTV = i;
                                         process.processOrder.save;

                                         var orderId = process.processOrder.OrderHeader.cwOrderId;
                                         var activityId = Global.getConfigVariable("DISSOCIAR_STB");
                                         var status = Global.getConfigVariable("ACTIVITY_RETURN_AUTOMATIC_ACTIVITY");

                                         FTTHCommon.setStatusActivity(orderId, activityId, status);

                                         return true;
                                      }
                                      return false
                                  }
                                  return false;
                                ]]></script>
                              </method>
                            </methodList>
                          </child>
                          <child name="notNeed" type="caseActivity">
                            <guid>{6b6e3666-1dcb-4cbb-9380-0e331713e9e5}</guid>
                            <label>Not Need</label>
                            <x>1106.2029</x>
                            <y>1193.7881</y>
                          </child>
                        </childList>
                      </child>
                    </childList>
                    <methodList>
                      <method name="cwOnProcActBefore" type="action">
                        <category>before</category>
                        <system>true</system>
                        <script><![CDATA[
                          var i = process.processOrder.OrderHeader.countIPTV;
                          var stb = null;

                          if(process.processOrder.OriginalData[0].EquipmentData[0].AddPointsEquipmentData){
                               stb = process.processOrder.OriginalData[0].EquipmentData[0].AddPointsEquipmentData[i];
                               if(stb && stb[0])
                                   stb[0].sendStbToSisStatus = 1 //Marcado para Enviar

                               this.process.processOrder.save;
                          }
                        ]]></script>
                      </method>
                    </methodList>
                  </child>
                </childList>
                <methodList>
                  <method name="cwOnProcActCond" type="action">
                    <category>cond</category>
                    <system>true</system>
                    <script><![CDATA[
                      var orderId = process.processOrder.OrderHeader.cwOrderId;
                      var atividade = "DISSOCIAR_STB";
                      var result = FTTHCommon.defineActivityNecessity(orderId, atividade);
                      return (result);
                    ]]></script>
                  </method>
                </methodList>
              </child>
              <child name="NotNeed" type="caseActivity">
                <guid>{ef85d5f3-b3a1-4183-a265-3b7b30256430}</guid>
                <label>Not Need</label>
                <x>961.6566</x>
                <y>1037.9834</y>
              </child>
            </childList>
          </child>
        </childList>
      </child>
      <child name="UpdateFacilitySubprocess" type="seqActivity">
        <guid>{dc082062-2bf1-4482-bbe9-ff284c2d1d6d}</guid>
        <label>Update Facility Subprocess</label>
        <x>1021.781</x>
        <y>1357.9135</y>
        <childList>
          <child name="CheckNeedUpdateFacility" type="switchActivity">
            <guid>{e8816bc7-00e5-4c20-a50e-48bcaf1350ac}</guid>
            <label>Check Need Update Facility</label>
            <x>1030.1794</x>
            <y>1483.0469</y>
            <childList>
              <child name="Need" type="caseActivity">
                <guid>{4b4f022c-f5a3-4cf1-887d-5ed56d730e73}</guid>
                <label>Need</label>
                <x>227.41966</x>
                <y>4746.417</y>
                <childList>
                  <child name="updateFacilities" type="seqActivity">
                    <guid>{505ff599-f6c7-4d03-bd00-3673d6e29c04}</guid>
                    <label>Update Facilities</label>
                    <x>1075.5251</x>
                    <y>1648.2539</y>
                    <childList>
                      <child name="UpdateCPESubprocess" type="subflowActivity">
                        <element>prrev_FTTHProcess.UpdateCPESubprocess_cwr7</element>
                        <guid>{1a434f03-4c04-4400-91a7-f5371d31e075}</guid>
                        <label>Update CPE Subprocess</label>
                        <x>1075.3226</x>
                        <y>1772.0068</y>
                        <methodList>
                          <method name="cwOnProcActCond" type="action">
                            <category>cond</category>
                            <system>true</system>
                            <script><![CDATA[
                              //

                              var ordem = process.processOrder;
                              var orderId = ordem.OrderHeader.cwOrderId;

                              var isTrocaBundle = false;
                              var isExclusaoPonto = false;

                              var searchDoc = new Document('FTTHOrderManagementInterface:OrderParameters');
                              searchDoc.orderId = orderId;
                              searchDoc.idCatalogo = "OI_IPTV";
                              searchDoc.acao = "remover";

                              searchDoc.cwDocId = null;

                              var result = Finder.runSearch('FTTHOrderManagementInterface:orderParamDocFind', searchDoc);

                              for (var i = 0; i < result.length; i++) {
                                  switch(result[i].operacao) {
                                      case ("exclusaoPontoAdicionalFTTH"):
                                          isExclusaoPonto = true;
                                          break;
                                      case ("trocaBundleFTTH"):
                                          isTrocaBundle = true;
                                          break;
                                  }
                              }

                              //


                              return !(isTrocaBundle && isExclusaoPonto);
                            ]]></script>
                          </method>
                        </methodList>
                      </child>
                      <child name="CheckNeedUpdateFacility" type="switchActivity">
                        <guid>{9bb222cc-b1bd-4e19-8512-0dbb9c635140}</guid>
                        <label>Check Need Update Facility</label>
                        <x>1087.6595</x>
                        <y>1905.4609</y>
                        <childList>
                          <child name="Yes" type="caseActivity">
                            <guid>{a9b40684-62e9-4af4-a978-c177ea96776f}</guid>
                            <label>Yes</label>
                            <x>194.69145</x>
                            <y>4980.4595</y>
                            <childList>
                              <child name="UpdateCablingSubprocess" type="subflowActivity">
                                <element>prrev_FTTHProcess.UpdateCablingSubprocess_cwr6</element>
                                <guid>{28834d10-b30c-4feb-8fa9-929189958d8e}</guid>
                                <label>Update Cabling Subprocess</label>
                                <x>1125.1649</x>
                                <y>2060.9668</y>
                              </child>
                            </childList>
                            <methodList>
                              <method name="cwOnProcActCond" type="action">
                                <category>cond</category>
                                <system>true</system>
                                <script><![CDATA[
                                  var orderId = process.processOrder.OrderHeader.cwOrderId;
                                  var atividade = "ATUALIZAR_CABEAMENTO_INTERNO";
                                  var result = FTTHCommon.defineActivityNecessity(orderId, atividade);
                                  return (result);
                                ]]></script>
                              </method>
                            </methodList>
                          </child>
                          <child name="No" type="caseActivity">
                            <guid>{3623eba4-1363-4009-8b3a-47cdb4bce7eb}</guid>
                            <label>No</label>
                            <x>1041.1649</x>
                            <y>2075.668</y>
                          </child>
                        </childList>
                      </child>
                    </childList>
                  </child>
                </childList>
                <methodList>
                  <method name="cwOnProcActCond" type="action">
                    <category>cond</category>
                    <system>true</system>
                    <script><![CDATA[
                      var orderId = process.processOrder.OrderHeader.cwOrderId;
                      var atividade = "ATUALIZAR_%";
                      var result = FTTHCommon.defineActivityNecessity(orderId, atividade);
                      return (result);
                    ]]></script>
                  </method>
                </methodList>
              </child>
              <child name="NotNeed" type="caseActivity">
                <guid>{6b2e7488-9ea0-41c3-9885-5cffb16fd85b}</guid>
                <label>Not Need</label>
                <x>988.96423</x>
                <y>1927.5127</y>
              </child>
            </childList>
          </child>
        </childList>
      </child>
      <child name="ConfirmActionStart" type="seqActivity">
        <guid>{a2a9b518-5935-47ed-bfe0-077054ea9185}</guid>
        <label>Confirm Action Start</label>
        <x>1047.2988</x>
        <y>2219.712</y>
        <childList>
          <child name="CheckNeedConfirmAction" type="switchActivity">
            <guid>{8f108517-fb37-43ea-9358-4c079c3aeb12}</guid>
            <label>Check Need Confirm Action</label>
            <x>1044.1567</x>
            <y>2317.4128</y>
            <childList>
              <child name="Yes" type="caseActivity">
                <guid>{7d81e335-e6f4-481a-a03b-05c0d06b7982}</guid>
                <label>Yes</label>
                <x>84.582146</x>
                <y>230.0</y>
                <childList>
                  <child name="ConfirmActionInventorySubprocess" type="subflowActivity">
                    <element>prrev_FTTHProcess.ConfirmActionSubprocess_cwr6</element>
                    <guid>{60033de1-b192-4032-b84e-e188f8cfcc3a}</guid>
                    <label>Confirm Action Inventory Subprocess</label>
                    <x>1083.3213</x>
                    <y>2458.2175</y>
                  </child>
                </childList>
                <methodList>
                  <method name="cwOnProcActCond" type="action">
                    <category>cond</category>
                    <system>true</system>
                    <script><![CDATA[
                      var orderId = process.processOrder.OrderHeader.cwOrderId;
                      var atividade = "CONFIRMAR_DESIGNACAO";
                      var result = FTTHCommon.defineActivityNecessity(orderId, atividade);
                      return (result);
                    ]]></script>
                  </method>
                </methodList>
              </child>
              <child name="No" type="caseActivity">
                <guid>{ed63b76b-82ed-4e20-b361-4bcf15098d53}</guid>
                <label>No</label>
                <x>999.3212</x>
                <y>2480.2693</y>
              </child>
            </childList>
          </child>
        </childList>
      </child>
      <child name="NotifyClosingSubprocess" type="subflowActivity">
        <element>prrev_FTTHProcess.NotifyClosingSubprocess_cwr5</element>
        <guid>{63b37516-b024-4297-a5b5-fcd8e00a5d03}</guid>
        <label>Notify Closing Subprocess</label>
        <x>1033.4829</x>
        <y>2614.0222</y>
      </child>
      <child name="FTTHModificationProcessComplete" type="completeActivity">
        <guid>{c09403aa-1b55-403c-a157-9380035a1216}</guid>
        <label>FTTH Modification Process Complete</label>
        <x>1033.1519</x>
        <y>2740.1257</y>
        <methodList>
          <method name="cwOnProcActBefore" type="action">
            <category>before</category>
            <system>true</system>
            <script><![CDATA[
              var orderId = process.processOrder.OrderHeader.cwOrderId;;
              var status = Global.getConfigVariable("ACTIVITY_STATUS_COMPLETE");
              FTTHCommon.setStatusExecution(orderId, status);


              FTTHCommon.setStatusOrder(orderId,  Global.getConfigVariable("ACTIVITY_STATUS_COMPLETE"));

              process.processOrder.OrderHeader.dataFechamento = Calendar.parseDate(Calendar.formatDate(new Date(), 'yyyy-MM-dd\'T\'HH:mm:ss'), 'yyyy-MM-dd\'T\'HH:mm:ss');
              process.processOrder.save();
            ]]></script>
          </method>
        </methodList>
      </child>
    </childList>
  </activity>
  <curRevision>true</curRevision>
  <description><![CDATA[
    <p style="margin-top: 0">
      Processo respons&#225;vel pela execu&#231;&#227;o da OS de Modifica&#231;&#227;o.
    </p>
    <p style="margin-top: 0">
      Os processos s&#227;o realizados sequencialmente e um processo s&#243; poder&#225; ser
      inicializado ap&#243;s a finaliza&#231;&#227;o com sucesso do seu antecessor.
    </p>
  ]]></description>
  <label>FTTH Modification Process</label>
  <metaVersion>3</metaVersion>
  <priority>8</priority>
  <process>proc_FTTHProcess.FTTHModificationProcess</process>
  <revision>30</revision>
  <type>User</type>
</process__revision>